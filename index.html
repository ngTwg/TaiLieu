<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>AstroMind - Khai Phá Tri Thức Vũ Trụ | Đề Thi & Tài Liệu Học Tập</title>
    <meta name="description" content="AstroMind - Nền tảng tài liệu học tập #1 Việt Nam. Đề thi Giữa kì, Cuối kì chất lượng cao và tài khoản Premium với giá tốt nhất.">
    <meta name="keywords" content="đề thi giữa kì, đề thi cuối kì, tài liệu học tập, toán cao cấp, vật lý đại cương, lập trình C++, ChatGPT, Canva Pro">
    <meta name="author" content="AstroMind">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://astromind.vn/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://astromind.vn/">
    <meta property="og:title" content="AstroMind - Khai Phá Tri Thức Vũ Trụ">
    <meta property="og:description" content="Nền tảng tài liệu học tập #1 Việt Nam. Đề thi chất lượng cao và tài khoản Premium.">
    <meta property="og:image" content="https://astromind.vn/og-image.jpg">
    <meta property="og:locale" content="vi_VN">
    <meta property="og:site_name" content="AstroMind">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://astromind.vn/">
    <meta name="twitter:title" content="AstroMind - Khai Phá Tri Thức Vũ Trụ">
    <meta name="twitter:description" content="Nền tảng tài liệu học tập #1 Việt Nam.">
    <meta name="twitter:image" content="https://astromind.vn/twitter-image.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "EducationalOrganization",
        "name": "AstroMind",
        "description": "Nền tảng tài liệu học tập #1 Việt Nam",
        "url": "https://astromind.vn",
        "logo": "https://astromind.vn/logo.png",
        "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "customer service",
            "availableLanguage": "Vietnamese"
        }
    }
    </script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Font hỗ trợ tiếng Việt tốt -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body { 
            font-family: 'Be Vietnam Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
        }
        
        @keyframes marquee { from { transform: translateX(0); } to { transform: translateX(-50%); } }
        .animate-marquee { animation: marquee 40s linear infinite; }
        .animate-marquee:hover { animation-play-state: paused; }
        
        @keyframes float {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
        .animate-float { animation: float 6s ease-in-out infinite; }
        
        @keyframes fade-in-down {
          from { opacity: 0; transform: translateY(-20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-down { animation: fade-in-down 0.5s ease-out; }
        
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fade-in { animation: fade-in 0.5s ease-out; }

        .star-shooting span {
          position: absolute;
          top: 50%;
          left: 50%;
          width: 4px;
          height: 4px;
          background: #fff;
          border-radius: 50%;
          box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.1), 0 0 0 8px rgba(255, 255, 255, 0.1), 0 0 20px rgba(255, 255, 255, 1);
          animation: shooting 3s linear infinite;
          opacity: 0;
        }
        .star-shooting span::before {
          content: '';
          position: absolute;
          top: 50%;
          transform: translateY(-50%);
          width: 300px;
          height: 1px;
          background: linear-gradient(90deg, #fff, transparent);
        }
        @keyframes shooting {
          0% { transform: rotate(315deg) translateX(0); opacity: 1; }
          70% { opacity: 1; }
          100% { transform: rotate(315deg) translateX(-1000px); opacity: 0; }
        }

        .scrollbar-hide::-webkit-scrollbar { display: none; }
        
        .sold-out-overlay { position: relative; }
        .sold-out-overlay::after {
            content: 'HẾT HÀNG';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-12deg);
            background: rgba(220, 38, 38, 0.9);
            color: white;
            padding: 8px 16px;
            font-weight: bold;
            border-radius: 8px;
            border: 2px solid rgba(248, 113, 113, 0.8);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 30;
        }

        .package-card {
            transition: all 0.3s ease;
        }
        .package-card:hover {
            transform: translateY(-4px);
        }
        .package-card.selected {
            border-color: rgba(6, 182, 212, 0.8) !important;
            background: rgba(6, 182, 212, 0.1) !important;
        }
        .package-card.popular {
            border-color: rgba(168, 85, 247, 0.5);
        }
        
        /* Modal styles */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .modal-content {
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            width: 100%;
        }
        
        /* Legal page styles */
        .legal-content h3 {
            color: #22d3ee;
            font-size: 1.25rem;
            font-weight: 700;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        
        .legal-content p {
            color: #9ca3af;
            margin-bottom: 1rem;
            line-height: 1.7;
        }
        
        .legal-content ul {
            list-style: disc;
            margin-left: 1.5rem;
            color: #9ca3af;
            margin-bottom: 1rem;
        }
        
        .legal-content li {
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body class="bg-black text-gray-100 font-sans selection:bg-cyan-500 selection:text-white overflow-x-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // --- ICONS ---
        const IconStar = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>;
        const IconCheck = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"/></svg>;
        const IconCheckCircle = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>;
        const IconMenu = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>;
        const IconX = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>;
        const IconSparkles = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M3 5h4"/><path d="M3 9h4"/></svg>;
        const IconRocket = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>;
        const IconHelpCircle = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>;
        const IconBookOpen = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>;
        const IconUsers = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>;
        const IconAward = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="8" r="6"/><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"/></svg>;
        const IconClock = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>;
        const IconShield = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>;
        const IconZap = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>;
        const IconGift = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="8" width="18" height="4" rx="1"/><path d="M12 8v13"/><path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"/><path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"/></svg>;
        const IconHeart = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>;
        const IconArrowRight = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>;
        const IconPhone = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>;
        const IconShoppingCart = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>;
        const IconLoader = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>;
        const IconSearch = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>;
        const IconCopy = (props) => <svg onClick={props.onClick} {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>;
        const IconChevronRight = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6"/></svg>;
        const IconPlus = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>;
        const IconMinus = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/></svg>;
        const IconAlertCircle = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>;
        const IconSend = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="22" x2="11" y1="2" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>;
        const IconRefresh = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>;
        const IconGraduationCap = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>;
        const IconClipboardList = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg>;
        const IconFileEdit = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"/><polyline points="14 2 14 8 20 8"/><path d="M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"/></svg>;
        const IconFileText = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></svg>;
        const IconPlayCircle = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></svg>;
        const IconPackage = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m7.5 4.27 9 5.15"/><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></svg>;
        const IconTag = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"/><path d="M7 7h.01"/></svg>;
        const IconCode = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>;
        const IconGithub = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>;
        const IconExternalLink = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>;
        const IconFileCode = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="m10 13-2 2 2 2"/><path d="m14 17 2-2-2-2"/></svg>;
        const IconScale = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="M7 21h10"/><path d="M12 3v18"/><path d="M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"/></svg>;
        const IconLock = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>;
        const IconRotateCcw = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>;
        const IconMail = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>;
        const IconAlertTriangle = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>;
        
        // Brand Icons
        const IconZalo = (props) => (
            <svg {...props} viewBox="0 0 50 50" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                 <path d="M25 4C13.4 4 4 11.8 4 21.4c0 4.1 1.7 8 4.7 11-.2 2.7-1.7 6.3-4.2 8.7 4.9.4 9.1-2 11.2-4.1 2.8 1.4 6 2.2 9.3 2.2 11.6 0 21-7.8 21-17.4S36.6 4 25 4zm4.1 23h-8.2v-2.1l6.1-8.6h-5.9v-2.8H29v2.1l-6.1 8.7h6.2v2.7z"/>
            </svg>
        );
        const IconGoogle = (props) => (
            <svg {...props} viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .533 5.347.533 12S5.867 24 12.48 24c3.44 0 6.053-1.147 8.16-3.293 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.12H12.48z"/>
            </svg>
        );
        const IconChatGPT = (props) => (
            <svg {...props} viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M22.282 9.821a5.985 5.985 0 0 0-.516-4.91 6.046 6.046 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.98 4.18a5.985 5.985 0 0 0-3.998 2.9 6.046 6.046 0 0 0 .743 7.097 5.98 5.98 0 0 0 .51 4.911 6.051 6.051 0 0 0 6.516 2.9A5.985 5.985 0 0 0 13.26 24a6.056 6.056 0 0 0 5.772-4.206 5.99 5.99 0 0 0 3.997-2.9 6.056 6.056 0 0 0-.747-7.073zM13.26 22.43a4.476 4.476 0 0 1-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 0 0 .392-.681v-6.737l2.02 1.168a.071.071 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494zM3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085 4.783 2.759a.771.771 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646zM2.34 7.896a4.485 4.485 0 0 1 2.366-1.973V11.6a.766.766 0 0 0 .388.676l5.815 3.355-2.02 1.168a.076.076 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.872zm16.597 3.855l-5.833-3.387L15.119 7.2a.076.076 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 0 0-.785 0L9.409 9.23V6.897a.066.066 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.795.795 0 0 0-.393.681zm1.097-2.365l2.602-1.5 2.607 1.5v2.999l-2.597 1.5-2.607-1.5z"/>
            </svg>
        );
        const IconCanva = (props) => (
            <svg {...props} viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M12.001 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75-4.365-9.75-9.75-9.75zm3.75 14.25c-1.875 0-3.375-1.2-3.75-3.075-.075-.375-.075-.675-.075-1.05 0-2.1 1.65-3.825 3.75-3.825.6 0 1.05.075 1.5.3.15.075.225.225.225.375v.075c0 .15-.075.3-.225.375l-.6.375c-.15.075-.3.075-.45 0-.15-.075-.3-.15-.45-.15-.975 0-1.8.825-1.8 1.8s.825 1.8 1.8 1.8c.525 0 1.05-.225 1.35-.675.075-.15.225-.15.45-.075l.525.375c.15.075.15.3.075.45-.45.75-1.275 1.2-2.325 1.2z"/>
            </svg>
        );

        // --- CONFIG ---
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyf_nITfjuriTEFhUhqUI73jNNNrR5KhvkLIWokRKi_6dTI7gC8ASN8wkb11sNvFOYe/exec";
        
        const BANK_INFO = {
            bankId: "MB",          
            accountNum: "11166774411", 
            accountName: "LE NGOC TUONG", 
            qrLink: "https://img.vietqr.io/image/MB-11166774411-compact2.jpg" 
        };

        // Cấu hình gói sản phẩm
        const PACKAGE_CONFIG = {
            pdf: {
                id: 'pdf',
                name: 'File PDF',
                icon: <IconFileText className="w-5 h-5" />,
                price: 30000,
                priceDisplay: '30.000đ',
                description: 'File PDF đề thi + đáp án chi tiết',
                color: 'from-blue-500 to-cyan-500',
                features: ['Đề thi đầy đủ', 'Đáp án chi tiết', 'Tải về ngay']
            },
            quiz1: {
                id: 'quiz1',
                name: '1 Lượt Quiz',
                icon: <IconPlayCircle className="w-5 h-5" />,
                price: 6000,
                priceDisplay: '6.000đ',
                description: '1 lượt làm quiz trắc nghiệm online',
                color: 'from-green-500 to-emerald-500',
                features: ['1 lượt làm bài', 'Chấm điểm tự động', 'Xem đáp án sau khi nộp']
            },
            quiz6: {
                id: 'quiz6',
                name: '6 Lượt Quiz',
                icon: <IconPlayCircle className="w-5 h-5" />,
                price: 30000,
                priceDisplay: '30.000đ',
                originalPrice: '36.000đ',
                description: '6 lượt làm quiz (tiết kiệm 17%)',
                color: 'from-emerald-500 to-teal-500',
                features: ['6 lượt làm bài', 'Tiết kiệm 6.000đ', 'Không giới hạn thời gian'],
                popular: true
            },
            quiz10: {
                id: 'quiz10',
                name: '10 Lượt Quiz',
                icon: <IconPlayCircle className="w-5 h-5" />,
                price: 40000,
                priceDisplay: '40.000đ',
                originalPrice: '60.000đ',
                description: '10 lượt làm quiz (tiết kiệm 33%)',
                color: 'from-teal-500 to-cyan-500',
                features: ['10 lượt làm bài', 'Tiết kiệm 20.000đ', 'Ưu đãi tốt nhất']
            },
            combo: {
                id: 'combo',
                name: 'Combo Tiết Kiệm',
                icon: <IconPackage className="w-5 h-5" />,
                price: 50000,
                priceDisplay: '50.000đ',
                originalPrice: '60.000đ',
                description: 'File PDF + 5 lượt Quiz',
                color: 'from-purple-500 to-pink-500',
                features: ['File PDF đầy đủ', '5 lượt làm Quiz', 'Tiết kiệm 10.000đ'],
                bestValue: true
            }
        };

        // --- DATA ---
        const GIUAKI_DATA = [
            {
                id: 'gk1',
                title: "Toán Cao Cấp",
                description: "Bộ đề thi giữa kì môn Toán Cao Cấp kèm đáp án chi tiết và hướng dẫn giải.",
                image: "https://images.unsplash.com/photo-1635070041078-e363dbe005cb?auto=format&fit=crop&q=80&w=600",
                trialLink: "https://forms.gle/example-toan-gk",
                tags: ["Toán", "Giữa kì"],
                subject: "Toán Cao Cấp",
                students: 1234,
                rating: 4.9,
                questionCount: 50,
                badge: "Bestseller",
                quantity: -1
            },
            {
                id: 'gk2',
                title: "Vật Lý Đại Cương",
                description: "Tổng hợp đề thi giữa kì Vật Lý Đại Cương từ nhiều trường đại học.",
                image: "https://images.unsplash.com/photo-1636466497217-26a8cbeaf0aa?auto=format&fit=crop&q=80&w=600",
                trialLink: "https://forms.gle/example-vatly-gk",
                tags: ["Vật lý", "Giữa kì"],
                subject: "Vật Lý Đại Cương",
                students: 892,
                rating: 4.8,
                questionCount: 40,
                badge: "Hot",
                quantity: -1
            },
            {
                id: 'gk3',
                title: "Lập Trình C++",
                description: "Bộ đề giữa kì môn Lập Trình C++ với code mẫu và giải thích thuật toán.",
                image: "https://images.unsplash.com/photo-1515879218367-8466d910aaa4?auto=format&fit=crop&q=80&w=600",
                trialLink: "https://forms.gle/example-cpp-gk",
                tags: ["IT", "Giữa kì"],
                subject: "Lập Trình C++",
                students: 2156,
                rating: 4.95,
                questionCount: 35,
                badge: "Premium",
                quantity: -1
            },
            {
                id: 'gk4',
                title: "Hóa Đại Cương",
                description: "Đề thi giữa kì Hóa Đại Cương với lời giải chi tiết từng bước.",
                image: "https://images.unsplash.com/photo-1532634922-8fe0b757fb13?auto=format&fit=crop&q=80&w=600",
                trialLink: "https://forms.gle/example-hoa-gk",
                tags: ["Hóa học", "Giữa kì"],
                subject: "Hóa Đại Cương",
                students: 756,
                rating: 4.7,
                questionCount: 45,
                badge: "",
                quantity: -1
            },
            {
                id: 'gk5',
                title: "Tiếng Anh",
                description: "Bộ đề giữa kì Tiếng Anh theo chuẩn TOEIC format.",
                image: "https://images.unsplash.com/photo-1546410531-bb4caa6b424d?auto=format&fit=crop&q=80&w=600",
                trialLink: "https://forms.gle/example-english-gk",
                tags: ["Tiếng Anh", "Giữa kì"],
                subject: "Tiếng Anh",
                students: 1890,
                rating: 4.85,
                questionCount: 60,
                badge: "Hot",
                quantity: -1
            }
        ];

        const CUOIKI_DATA = [
            {
                id: 'ck1',
                title: "Toán Cao Cấp",
                description: "Trọn bộ đề thi cuối kì môn Toán Cao Cấp với đáp án chi tiết từ A-Z.",
                image: "https://images.unsplash.com/photo-1509228468518-180dd4864904?auto=format&fit=crop&q=80&w=600",
                trialLink: "https://forms.gle/example-toan-ck",
                tags: ["Toán", "Cuối kì"],
                subject: "Toán Cao Cấp",
                students: 3456,
                rating: 4.95,
                questionCount: 80,
                badge: "Bestseller",
                quantity: -1
            },
            {
                id: 'ck2',
                title: "Vật Lý Đại Cương",
                description: "Bộ đề cuối kì Vật Lý Đại Cương đầy đủ nhất, cập nhật mới nhất 2024.",
                image: "https://images.unsplash.com/photo-1532094349884-543bc11b234d?auto=format&fit=crop&q=80&w=600",
                trialLink: "https://forms.gle/example-vatly-ck",
                tags: ["Vật lý", "Cuối kì"],
                subject: "Vật Lý Đại Cương",
                students: 1567,
                rating: 4.85,
                questionCount: 70,
                badge: "Hot",
                quantity: -1
            },
            {
                id: 'ck3',
                title: "Lập Trình C++",
                description: "Tuyển tập đề cuối kì C++ từ cơ bản đến nâng cao, có video giải chi tiết.",
                image: "https://images.unsplash.com/photo-1542831371-29b0f74f9713?auto=format&fit=crop&q=80&w=600",
                trialLink: "https://forms.gle/example-cpp-ck",
                tags: ["IT", "Cuối kì"],
                subject: "Lập Trình C++",
                students: 2890,
                rating: 4.9,
                questionCount: 55,
                badge: "Premium",
                quantity: -1
            },
            {
                id: 'ck4',
                title: "Hóa Đại Cương",
                description: "Đề thi cuối kì Hóa Đại Cương tổng hợp từ nhiều trường ĐH.",
                image: "https://images.unsplash.com/photo-1603126857599-f6e157fa2fe6?auto=format&fit=crop&q=80&w=600",
                trialLink: "https://forms.gle/example-hoa-ck",
                tags: ["Hóa học", "Cuối kì"],
                subject: "Hóa Đại Cương",
                students: 945,
                rating: 4.75,
                questionCount: 65,
                badge: "",
                quantity: -1
            },
            {
                id: 'ck5',
                title: "Tiếng Anh",
                description: "Bộ đề cuối kì Tiếng Anh chuẩn format TOEIC, IELTS Academic.",
                image: "https://images.unsplash.com/photo-1434030216411-0b793f4b4173?auto=format&fit=crop&q=80&w=600",
                trialLink: "https://forms.gle/example-english-ck",
                tags: ["Tiếng Anh", "Cuối kì"],
                subject: "Tiếng Anh",
                students: 2340,
                rating: 4.88,
                questionCount: 90,
                badge: "Bestseller",
                quantity: -1
            }
        ];

        const ACCOUNTS_DATA = [
            {
                id: 'google',
                title: "Tài khoản Google",
                description: "12 tháng, 2 TB Drive, tạo ảnh Nana Banana Pro, Gemini 3 Pro, 1k credit Video Veo 3.1.",
                price: "200.000đ", 
                priceVal: 200000,   
                platform: "Google",
                icon: <IconGoogle className="w-8 h-8 text-blue-400" />,
                color: "from-blue-500 to-red-500",
                features: ["2TB Storage", "Gemini 3 Pro", "Veo 3.1 Video"],
                quantity: -1 
            },
            {
                id: 'chatgpt',
                title: "ChatGPT Plus",
                description: "Gói 1 tháng, sử dụng Model GPT-5.2 Thinking mới nhất.",
                price: "200.000đ",
                priceVal: 200000,
                platform: "OpenAI",
                icon: <IconChatGPT className="w-8 h-8 text-emerald-400" />,
                color: "from-emerald-500 to-teal-600",
                features: ["GPT-5.2 Thinking", "DALL-E 3"],
                quantity: -1
            },
            {
                id: 'go',
                title: "ChatGPT Go 1 Năm",
                description: "Giải pháp ChatGPT Go học tập toàn diện.",
                price: "300.000đ",
                priceVal: 300000,
                platform: "OpenAI",
                icon: <IconRocket className="w-8 h-8 text-orange-400" />,
                color: "from-orange-500 to-amber-500",
                features: ["Bản quyền 1 năm", "Full tính năng"],
                quantity: -1 
            },
            {
                id: 'edu',
                title: "ChatGPT Edu 1 Năm",
                description: "Tài khoản ChatGPT Edu chính chủ dành cho giáo dục.",
                price: "300.000đ",
                priceVal: 300000,
                platform: "OpenAI",
                icon: <IconBookOpen className="w-8 h-8 text-blue-400" />,
                color: "from-blue-600 to-indigo-600",
                features: ["Ưu đãi sinh viên", "Bảo hành 1 năm"],
                quantity: -1 
            },
            {
                id: 'canva',
                title: "Canva Pro (Edu)",
                description: "Join lớp Edu, sử dụng đầy đủ tính năng Pro. 50k/slot/năm.",
                price: "50.000đ",
                priceVal: 50000,
                platform: "Canva",
                icon: <IconCanva className="w-8 h-8 text-cyan-400" />,
                color: "from-purple-600 to-pink-500",
                features: ["Magic Resize", "Pro Assets", "1 Năm"],
                quantity: -1
            },
            {
                id: 'contact',
                title: "Yêu cầu App Khác",
                description: "Liên hệ để được tư vấn phần mềm khác.",
                price: "Liên hệ",
                priceVal: 0,
                platform: "Support",
                icon: <IconHelpCircle className="w-8 h-8 text-amber-400" />,
                color: "from-amber-500 to-orange-400",
                isContact: true,
                features: ["Tư vấn miễn phí", "Hỗ trợ 24/7"],
                quantity: 999
            }
        ];

        // Source Code & Projects Data
        const SOURCE_CODE_DATA = [
            {
                id: 'sc1',
                title: "Website Bán Đề Thi",
                description: "Template website bán đề thi/tài liệu với React + Tailwind CSS. Tích hợp thanh toán QR, quản lý đơn hàng qua Google Sheets.",
                price: "500.000đ",
                priceVal: 500000,
                icon: <IconCode className="w-8 h-8 text-cyan-400" />,
                color: "from-cyan-500 to-blue-600",
                features: ["React + Tailwind", "Google Sheets API", "QR Payment", "Full Source"],
                demoLink: "#",
                quantity: -1
            },
            {
                id: 'sc2',
                title: "Bot Telegram Auto Reply",
                description: "Bot Telegram tự động trả lời, quản lý đơn hàng, gửi thông báo thanh toán.",
                price: "300.000đ",
                priceVal: 300000,
                icon: <IconSend className="w-8 h-8 text-blue-400" />,
                color: "from-blue-500 to-indigo-600",
                features: ["Python/Node.js", "Auto Reply", "Order Management", "Payment Notification"],
                demoLink: "#",
                quantity: -1
            },
            {
                id: 'sc3',
                title: "Landing Page Template",
                description: "Template Landing Page đẹp mắt, responsive, tối ưu SEO cho mọi ngành nghề.",
                price: "200.000đ",
                priceVal: 200000,
                icon: <IconFileCode className="w-8 h-8 text-purple-400" />,
                color: "from-purple-500 to-pink-600",
                features: ["HTML/CSS/JS", "SEO Optimized", "Mobile First", "Easy Customize"],
                demoLink: "#",
                quantity: -1
            },
            {
                id: 'sc4',
                title: "Yêu Cầu Custom Project",
                description: "Nhận làm dự án theo yêu cầu: Website, App, Bot, Tool tự động hóa...",
                price: "Liên hệ",
                priceVal: 0,
                icon: <IconHelpCircle className="w-8 h-8 text-amber-400" />,
                color: "from-amber-500 to-orange-500",
                features: ["Tư vấn miễn phí", "Báo giá nhanh", "Hỗ trợ kỹ thuật"],
                isContact: true,
                quantity: 999
            }
        ];

        const STATS = [
            { icon: <IconUsers />, value: "10,000+", label: "Học viên", color: "from-cyan-400 to-blue-500" },
            { icon: <IconBookOpen />, value: "50+", label: "Bộ đề", color: "from-purple-400 to-pink-500" },
            { icon: <IconAward />, value: "99%", label: "Hài lòng", color: "from-amber-400 to-orange-500" },
            { icon: <IconClock />, value: "24/7", label: "Hỗ trợ", color: "from-emerald-400 to-teal-500" }
        ];

        const FEATURES = [
            { icon: <IconShield />, title: "Bảo mật tuyệt đối", description: "Thông tin được mã hóa và bảo vệ an toàn" },
            { icon: <IconZap />, title: "Kích hoạt tức thì", description: "Nhận tài liệu ngay sau khi thanh toán" },
            { icon: <IconGift />, title: "Ưu đãi hấp dẫn", description: "Giảm giá lên đến 50% cho học viên mới" },
            { icon: <IconHeart />, title: "Hỗ trợ tận tâm", description: "Đội ngũ support nhiệt tình 24/7" }
        ];

        const SOCIAL_LINKS = [
            { name: "Zalo", url: "#", color: "from-blue-500 to-blue-600", icon: <IconZalo className="w-5 h-5 fill-current" /> },
            { name: "Facebook", url: "#", color: "from-blue-600 to-blue-800", icon: <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg> },
            { name: "Telegram", url: "#", color: "from-cyan-400 to-blue-500", icon: <IconSend className="w-6 h-6" /> }
        ];

        const DEFAULT_REVIEWS = [];

        // Legal Content
        const LEGAL_PAGES = {
            terms: {
                title: "Điều Khoản Sử Dụng",
                icon: <IconScale className="w-6 h-6" />,
                content: `
                    <h3>1. Giới Thiệu</h3>
                    <p>Chào mừng bạn đến với AstroMind. Khi sử dụng dịch vụ của chúng tôi, bạn đồng ý tuân thủ các điều khoản và điều kiện sau đây.</p>
                    
                    <h3>2. Định Nghĩa</h3>
                    <p>"Dịch vụ" bao gồm tất cả các sản phẩm số, tài liệu học tập, đề thi, tài khoản phần mềm được cung cấp trên nền tảng AstroMind.</p>
                    <p>"Người dùng" là cá nhân hoặc tổ chức sử dụng dịch vụ của AstroMind.</p>
                    
                    <h3>3. Quyền và Nghĩa Vụ</h3>
                    <ul>
                        <li>Người dùng cam kết sử dụng dịch vụ đúng mục đích học tập cá nhân.</li>
                        <li>Không được chia sẻ, phát tán, bán lại tài liệu cho bên thứ ba.</li>
                        <li>Không được sử dụng tài khoản được cung cấp cho mục đích thương mại.</li>
                        <li>AstroMind có quyền từ chối cung cấp dịch vụ nếu phát hiện vi phạm.</li>
                    </ul>
                    
                    <h3>4. Thanh Toán</h3>
                    <p>Thanh toán được thực hiện qua chuyển khoản ngân hàng với nội dung chuyển khoản theo hướng dẫn. Đơn hàng sẽ được xử lý tự động sau khi thanh toán thành công.</p>
                    
                    <h3>5. Về Tài Khoản/App Bên Thứ 3</h3>
                    <p>Đối với các sản phẩm là tài khoản hoặc ứng dụng từ bên thứ 3 (Google, ChatGPT, Canva...):</p>
                    <ul>
                        <li>AstroMind cung cấp với tư cách đại lý/reseller được ủy quyền hoặc thông qua các chương trình hợp pháp.</li>
                        <li>Chúng tôi không chịu trách nhiệm nếu tài khoản bị khóa do vi phạm điều khoản của nhà cung cấp gốc.</li>
                        <li>Người dùng cần tuân thủ điều khoản sử dụng của từng nền tảng.</li>
                    </ul>
                    
                    <h3>6. Giới Hạn Trách Nhiệm</h3>
                    <p>AstroMind không chịu trách nhiệm về kết quả học tập, điểm số của người dùng sau khi sử dụng tài liệu.</p>
                    
                    <h3>7. Thay Đổi Điều Khoản</h3>
                    <p>AstroMind có quyền cập nhật điều khoản bất cứ lúc nào. Người dùng sẽ được thông báo qua email khi có thay đổi quan trọng.</p>
                `
            },
            privacy: {
                title: "Chính Sách Bảo Mật",
                icon: <IconLock className="w-6 h-6" />,
                content: `
                    <h3>1. Thông Tin Thu Thập</h3>
                    <p>Chúng tôi thu thập các thông tin sau để xử lý đơn hàng và cung cấp dịch vụ:</p>
                    <ul>
                        <li><strong>Họ và tên:</strong> Để xác định người mua và giao dịch.</li>
                        <li><strong>Email:</strong> Để gửi tài liệu, thông tin tài khoản và thông báo đơn hàng.</li>
                        <li><strong>Số điện thoại:</strong> Để liên hệ khi cần thiết và hỗ trợ khách hàng.</li>
                    </ul>
                    
                    <h3>2. Mục Đích Sử Dụng</h3>
                    <p>Thông tin của bạn được sử dụng cho các mục đích:</p>
                    <ul>
                        <li>Xử lý và giao đơn hàng</li>
                        <li>Gửi email xác nhận thanh toán và tài liệu</li>
                        <li>Hỗ trợ khách hàng khi có vấn đề</li>
                        <li>Gửi thông báo về khuyến mãi, cập nhật dịch vụ (có thể từ chối)</li>
                    </ul>
                    
                    <h3>3. Bảo Vệ Thông Tin</h3>
                    <p>Chúng tôi cam kết:</p>
                    <ul>
                        <li>Không bán, cho thuê thông tin cá nhân cho bên thứ 3</li>
                        <li>Mã hóa dữ liệu quan trọng trong quá trình truyền tải</li>
                        <li>Hạn chế quyền truy cập vào dữ liệu cá nhân</li>
                        <li>Lưu trữ dữ liệu trên các nền tảng bảo mật (Google Sheets với quyền riêng tư)</li>
                    </ul>
                    
                    <h3>4. Quyền Của Người Dùng</h3>
                    <p>Bạn có quyền:</p>
                    <ul>
                        <li>Yêu cầu xem thông tin cá nhân chúng tôi lưu trữ</li>
                        <li>Yêu cầu xóa thông tin cá nhân (sau khi hoàn tất giao dịch)</li>
                        <li>Từ chối nhận email marketing</li>
                        <li>Khiếu nại về việc xử lý dữ liệu</li>
                    </ul>
                    
                    <h3>5. Lưu Trữ Dữ Liệu</h3>
                    <p>Thông tin đơn hàng được lưu trữ trong vòng 12 tháng để phục vụ hỗ trợ và bảo hành. Sau đó có thể được xóa hoặc ẩn danh hóa.</p>
                    
                    <h3>6. Liên Hệ</h3>
                    <p>Nếu có thắc mắc về chính sách bảo mật, vui lòng liên hệ qua Zalo hoặc email trong phần Liên hệ.</p>
                `
            },
            refund: {
                title: "Chính Sách Hoàn Tiền",
                icon: <IconRotateCcw className="w-6 h-6" />,
                content: `
                    <h3>1. Điều Kiện Hoàn Tiền</h3>
                    <p>AstroMind cam kết hoàn tiền trong các trường hợp sau:</p>
                    <ul>
                        <li><strong>Lỗi hệ thống:</strong> Thanh toán thành công nhưng không nhận được sản phẩm trong 24 giờ.</li>
                        <li><strong>Sản phẩm lỗi:</strong> File không mở được, tài khoản không hoạt động ngay từ đầu.</li>
                        <li><strong>Chuyển nhầm/thừa tiền:</strong> Số tiền chuyển không đúng với giá trị đơn hàng.</li>
                    </ul>
                    
                    <h3>2. Quy Trình Hoàn Tiền</h3>
                    <ul>
                        <li>Liên hệ hỗ trợ trong vòng 24 giờ kể từ khi thanh toán</li>
                        <li>Cung cấp: Mã đơn hàng, ảnh chụp màn hình giao dịch, mô tả vấn đề</li>
                        <li>Đợi xác minh (tối đa 48 giờ làm việc)</li>
                        <li>Hoàn tiền về tài khoản ngân hàng trong 3-5 ngày làm việc</li>
                    </ul>
                    
                    <h3>3. Trường Hợp KHÔNG Hoàn Tiền</h3>
                    <ul>
                        <li>Đã tải/sử dụng tài liệu (do bản chất sản phẩm số)</li>
                        <li>Tài khoản bị khóa do vi phạm điều khoản của nhà cung cấp gốc</li>
                        <li>Đổi ý sau khi mua</li>
                        <li>Không liên hệ trong thời hạn quy định (24 giờ)</li>
                        <li>Cung cấp thông tin sai (email, số điện thoại)</li>
                    </ul>
                    
                    <h3>4. Xử Lý Chuyển Thiếu Tiền</h3>
                    <p>Nếu số tiền chuyển khoản ít hơn giá trị đơn hàng:</p>
                    <ul>
                        <li>Đơn hàng sẽ được giữ lại, không xử lý tự động</li>
                        <li>Khách hàng sẽ được thông báo qua email</li>
                        <li>Có thể chuyển bổ sung hoặc yêu cầu hoàn tiền</li>
                        <li>Nếu không phản hồi trong 7 ngày, số tiền sẽ được hoàn về tài khoản gốc</li>
                    </ul>
                    
                    <h3>5. Xử Lý Chuyển Thừa Tiền</h3>
                    <p>Nếu số tiền chuyển khoản nhiều hơn giá trị đơn hàng:</p>
                    <ul>
                        <li>Đơn hàng vẫn được xử lý bình thường</li>
                        <li>Số tiền thừa sẽ được hoàn lại trong 3-5 ngày làm việc</li>
                        <li>Hoặc có thể yêu cầu giữ làm credit cho lần mua sau</li>
                    </ul>
                    
                    <h3>6. Bảo Hành Tài Khoản</h3>
                    <p>Đối với sản phẩm là tài khoản:</p>
                    <ul>
                        <li>Bảo hành 7 ngày cho lỗi từ phía nhà cung cấp (không đăng nhập được, bị khóa không rõ lý do)</li>
                        <li>Không bảo hành nếu: Vi phạm ToS, chia sẻ cho người khác, sử dụng cho mục đích spam/lừa đảo</li>
                    </ul>
                    
                    <h3>7. Liên Hệ Hoàn Tiền</h3>
                    <p>Để yêu cầu hoàn tiền, vui lòng liên hệ qua Zalo hoặc gửi email kèm đầy đủ thông tin.</p>
                `
            }
        };

        // --- COMPONENTS ---
        
        const ParticleField = () => {
             const canvasRef = useRef(null);
             useEffect(() => {
                 const canvas = canvasRef.current;
                 if (!canvas) return;
                 const ctx = canvas.getContext('2d');
                 canvas.width = window.innerWidth;
                 canvas.height = window.innerHeight;
                 const particles = [];
                 const colors = ['#06b6d4', '#8b5cf6', '#ec4899', '#10b981', '#f59e0b'];
                 for (let i = 0; i < 100; i++) {
                     particles.push({
                         x: Math.random() * canvas.width,
                         y: Math.random() * canvas.height,
                         size: Math.random() * 2 + 0.5,
                         speedX: (Math.random() - 0.5) * 0.5,
                         speedY: (Math.random() - 0.5) * 0.5,
                         opacity: Math.random() * 0.5 + 0.2,
                         color: colors[Math.floor(Math.random() * colors.length)]
                     });
                 }
                 let animationId;
                 const animate = () => {
                     ctx.clearRect(0, 0, canvas.width, canvas.height);
                     particles.forEach((particle) => {
                         particle.x += particle.speedX;
                         particle.y += particle.speedY;
                         if (particle.x < 0) particle.x = canvas.width;
                         if (particle.x > canvas.width) particle.x = 0;
                         if (particle.y < 0) particle.y = canvas.height;
                         if (particle.y > canvas.height) particle.y = 0;
                         ctx.beginPath();
                         ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                         ctx.fillStyle = particle.color;
                         ctx.globalAlpha = particle.opacity;
                         ctx.fill();
                     });
                     ctx.globalAlpha = 1;
                     animationId = requestAnimationFrame(animate);
                 };
                 animate();
                 const handleResize = () => {
                     canvas.width = window.innerWidth;
                     canvas.height = window.innerHeight;
                 };
                 window.addEventListener('resize', handleResize);
                 return () => {
                     cancelAnimationFrame(animationId);
                     window.removeEventListener('resize', handleResize);
                 };
             }, []);
             return <canvas ref={canvasRef} className="fixed inset-0 z-0 pointer-events-none" />;
         };

         const ShootingStars = () => {
            const [stars, setStars] = useState([]);
            useEffect(() => {
                const interval = setInterval(() => {
                    const newStar = { id: Date.now(), top: Math.random() * 50 + "%", left: Math.random() * 100 + "%", delay: Math.random() * 2 + "s" };
                    setStars(prev => [...prev, newStar]);
                    setTimeout(() => { setStars(prev => prev.filter(star => star.id !== newStar.id)); }, 4000);
                }, 2000);
                return () => clearInterval(interval);
            }, []);
            return (
                <div className="fixed inset-0 z-0 pointer-events-none overflow-hidden star-shooting">
                    {stars.map(star => (<span key={star.id} style={{ top: star.top, left: star.left, animationDelay: star.delay }} />))}
                </div>
            );
         };

         const RevealOnScroll = ({ children, delay = 0 }) => {
             const [isVisible, setIsVisible] = useState(false);
             const ref = useRef(null);
             useEffect(() => {
                 const observer = new IntersectionObserver(([entry]) => { if (entry.isIntersecting) setIsVisible(true); }, { threshold: 0.1 });
                 if (ref.current) observer.observe(ref.current);
                 return () => observer.disconnect();
             }, []);
             return (
                 <div ref={ref} className={`transition-all duration-1000 transform ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`} style={{ transitionDelay: `${delay}ms` }}>
                     {children}
                 </div>
             );
         };

         const GlassCard = ({ children, className = "", hover = true }) => (
             <div className={`relative backdrop-blur-2xl bg-white/[0.03] border border-white/10 rounded-[2.5rem] overflow-hidden shadow-[0_8px_32px_0_rgba(31,38,135,0.37)] ${hover ? 'hover:bg-white/[0.08] hover:border-white/20 hover:shadow-cyan-500/20 transition-all duration-500 hover:-translate-y-2' : ''} ${className}`}>
                 <div className="absolute inset-0 bg-gradient-to-br from-white/[0.05] to-transparent pointer-events-none" />
                 {children}
             </div>
         );

         const MagneticButton = ({ children, className = "", onClick }) => {
             const buttonRef = useRef(null);
             const [position, setPosition] = useState({ x: 0, y: 0 });
             const handleMouseMove = (e) => {
                 if (!buttonRef.current) return;
                 const rect = buttonRef.current.getBoundingClientRect();
                 setPosition({ x: (e.clientX - rect.left - rect.width / 2) * 0.2, y: (e.clientY - rect.top - rect.height / 2) * 0.2 });
             };
             const handleMouseLeave = () => setPosition({ x: 0, y: 0 });
             return (
                 <button ref={buttonRef} onClick={onClick} onMouseMove={handleMouseMove} onMouseLeave={handleMouseLeave}
                     className={`transform transition-transform duration-300 ${className}`} style={{ transform: `translate(${position.x}px, ${position.y}px)` }}>
                     {children}
                 </button>
             );
         };

         const AnimatedCounter = ({ end, duration = 2000, suffix = "" }) => {
             const [count, setCount] = useState(0);
             const ref = useRef(null);
             const [isVisible, setIsVisible] = useState(false);
             useEffect(() => {
                 const observer = new IntersectionObserver(([entry]) => { if (entry.isIntersecting) setIsVisible(true); });
                 if (ref.current) observer.observe(ref.current);
                 return () => observer.disconnect();
             }, []);
             useEffect(() => {
                 if (!isVisible) return;
                 let startTime;
                 const animate = (currentTime) => {
                     if (!startTime) startTime = currentTime;
                     const progress = Math.min((currentTime - startTime) / duration, 1);
                     setCount(Math.floor(progress * end));
                     if (progress < 1) requestAnimationFrame(animate);
                 };
                 requestAnimationFrame(animate);
             }, [isVisible, end, duration]);
             return <span ref={ref}>{count.toLocaleString()}{suffix}</span>;
         };
         
         const StockBadge = ({ quantity }) => {
             if (quantity === -1) return <span className="text-xs text-gray-500 flex items-center gap-1"><IconLoader className="w-3 h-3 animate-spin" /> Đang tải...</span>;
             if (quantity === 0) return <span className="text-xs text-red-400 font-bold">Hết hàng</span>;
             if (quantity <= 5) return <span className="text-xs text-orange-400">Còn {quantity} sản phẩm</span>;
             return <span className="text-xs text-green-400">Còn hàng</span>;
         };

         const SearchBar = ({ searchTerm, setSearchTerm, placeholder, accentColor = "cyan" }) => {
             const colorClasses = {
                 cyan: "focus:border-cyan-500 focus:ring-cyan-500/20",
                 purple: "focus:border-purple-500 focus:ring-purple-500/20"
             };
             return (
                 <div className="relative w-full md:w-80">
                     <IconSearch className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
                     <input
                         type="text"
                         placeholder={placeholder}
                         value={searchTerm}
                         onChange={(e) => setSearchTerm(e.target.value)}
                         className={`w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-2xl text-white placeholder-gray-500 outline-none transition-all ${colorClasses[accentColor]} focus:ring-4 focus:bg-white/10`}
                     />
                     {searchTerm && (
                         <button onClick={() => setSearchTerm('')} className="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white">
                             <IconX className="w-4 h-4" />
                         </button>
                     )}
                 </div>
             );
         };

         // Modal Component cho Legal Pages
         const LegalModal = ({ isOpen, onClose, pageKey }) => {
             if (!isOpen || !pageKey) return null;
             
             const page = LEGAL_PAGES[pageKey];
             if (!page) return null;

             return (
                 <div className="modal-overlay" onClick={onClose}>
                     <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                         <GlassCard className="p-6 md:p-8" hover={false}>
                             <div className="flex items-center justify-between mb-6 pb-4 border-b border-white/10">
                                 <div className="flex items-center gap-3">
                                     <div className="p-2 rounded-xl bg-cyan-500/20 text-cyan-400">
                                         {page.icon}
                                     </div>
                                     <h2 className="text-xl md:text-2xl font-bold text-white">{page.title}</h2>
                                 </div>
                                 <button onClick={onClose} className="p-2 rounded-full hover:bg-white/10 text-gray-400 hover:text-white transition-colors">
                                     <IconX className="w-6 h-6" />
                                 </button>
                             </div>
                             
                             <div className="legal-content max-h-[60vh] overflow-y-auto pr-2 scrollbar-hide" dangerouslySetInnerHTML={{ __html: page.content }} />
                             
                             <div className="mt-6 pt-4 border-t border-white/10 text-center">
                                 <button onClick={onClose} className="px-6 py-2 bg-cyan-600 hover:bg-cyan-500 rounded-full text-white font-medium transition-colors">
                                     Đã hiểu
                                 </button>
                             </div>
                         </GlassCard>
                     </div>
                 </div>
             );
         };

         // Component hiển thị gói sản phẩm
         const PackageSelector = ({ selectedPackage, onSelect }) => {
             const packages = Object.values(PACKAGE_CONFIG);
             
             return (
                 <div className="space-y-3">
                     <label className="block text-sm font-medium text-gray-300 mb-3">Chọn gói sản phẩm:</label>
                     <div className="grid grid-cols-1 sm:grid-cols-2 gap-3">
                         {packages.map((pkg) => (
                             <div 
                                 key={pkg.id}
                                 onClick={() => onSelect(pkg)}
                                 className={`package-card relative p-4 rounded-2xl border cursor-pointer transition-all ${
                                     selectedPackage?.id === pkg.id 
                                     ? 'selected border-cyan-500/80 bg-cyan-500/10' 
                                     : pkg.popular 
                                     ? 'popular border-purple-500/30 bg-white/5 hover:bg-white/10'
                                     : pkg.bestValue
                                     ? 'border-amber-500/30 bg-white/5 hover:bg-white/10'
                                     : 'border-white/10 bg-white/5 hover:bg-white/10'
                                 }`}
                             >
                                 {pkg.popular && (
                                     <span className="absolute -top-2 -right-2 px-2 py-0.5 text-[10px] font-bold bg-purple-500 text-white rounded-full">
                                         PHỔ BIẾN
                                     </span>
                                 )}
                                 {pkg.bestValue && (
                                     <span className="absolute -top-2 -right-2 px-2 py-0.5 text-[10px] font-bold bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-full">
                                         TIẾT KIỆM
                                     </span>
                                 )}
                                 
                                 <div className="flex items-start gap-3">
                                     <div className={`p-2 rounded-xl bg-gradient-to-br ${pkg.color} text-white shrink-0`}>
                                         {pkg.icon}
                                     </div>
                                     <div className="flex-1 min-w-0">
                                         <div className="flex items-center justify-between gap-2">
                                             <h4 className="font-bold text-white text-sm truncate">{pkg.name}</h4>
                                             <div className="text-right shrink-0">
                                                 <span className="font-bold text-cyan-400">{pkg.priceDisplay}</span>
                                                 {pkg.originalPrice && (
                                                     <span className="text-xs text-gray-500 line-through ml-1">{pkg.originalPrice}</span>
                                                 )}
                                             </div>
                                         </div>
                                         <p className="text-xs text-gray-400 mt-1">{pkg.description}</p>
                                     </div>
                                 </div>
                                 
                                 {selectedPackage?.id === pkg.id && (
                                     <div className="absolute top-2 left-2">
                                         <IconCheckCircle className="w-5 h-5 text-cyan-400 fill-cyan-400/20" />
                                     </div>
                                 )}
                             </div>
                         ))}
                     </div>
                 </div>
             );
         };
         
         // Course Card với nút chọn gói
         const CourseCard = ({ course, index, onBuy }) => {
             const [isHovered, setIsHovered] = useState(false);
             const [showPackages, setShowPackages] = useState(false);
             const [selectedPackage, setSelectedPackage] = useState(null);
             
             const badgeColors = { "Bestseller": "from-amber-500 to-orange-500", "Hot": "from-red-500 to-pink-500", "Premium": "from-purple-500 to-indigo-500" };
             const isSoldOut = course.quantity === 0;
             const isLoading = course.quantity === -1;

             const handleBuyClick = () => {
                 if (selectedPackage) {
                     onBuy(course, selectedPackage);
                 }
             };

             return (
                 <RevealOnScroll delay={index * 150}>
                     <GlassCard className="group h-full flex flex-col">
                         <div className={`relative h-48 overflow-hidden rounded-t-[2.5rem] ${isSoldOut ? 'sold-out-overlay' : ''}`} 
                              onMouseEnter={() => setIsHovered(true)} onMouseLeave={() => setIsHovered(false)}>
                             <div className="absolute inset-0 bg-gradient-to-t from-[#050B14] via-transparent to-transparent z-10" />
                             <img src={course.image} alt={course.title} 
                                  className={`w-full h-full object-cover transition-all duration-700 ${isHovered && !isSoldOut ? 'scale-110 blur-sm' : 'scale-100'} ${isSoldOut ? 'grayscale opacity-60' : ''}`} />
                             
                             {!isSoldOut && !isLoading && (
                                 <a href={course.trialLink} target="_blank" rel="noopener noreferrer" 
                                    className={`absolute inset-0 flex items-center justify-center z-20 transition-opacity duration-300 ${isHovered ? 'opacity-100' : 'opacity-0'}`}>
                                     <div className="w-14 h-14 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center cursor-pointer border border-white/30 hover:bg-white/30 transition-colors">
                                         <IconFileEdit className="w-5 h-5 text-white" />
                                     </div>
                                 </a>
                             )}

                             <div className="absolute bottom-3 left-3 z-20 flex flex-wrap gap-2">
                                 {course.badge && !isSoldOut && (
                                     <span className={`px-2 py-0.5 rounded-full text-[10px] font-bold text-white bg-gradient-to-r ${badgeColors[course.badge]} shadow-lg`}>
                                         {course.badge}
                                     </span>
                                 )}
                             </div>
                             
                             <div className="absolute top-3 right-3 z-20">
                                 <span className="px-2 py-1 rounded-lg text-xs font-medium bg-black/50 backdrop-blur-md text-white border border-white/10">
                                     {course.questionCount} câu hỏi
                                 </span>
                             </div>
                         </div>
                         
                         <div className="p-5 flex-1 flex flex-col">
                             <div className="flex items-center justify-between mb-2">
                                 <div className="flex items-center gap-1 text-amber-400 text-sm font-bold">
                                     <IconStar className="w-4 h-4 fill-current" />{course.rating}
                                 </div>
                                 <span className="text-xs text-gray-400">{course.students.toLocaleString()} học viên</span>
                             </div>
                             
                             <h3 className={`text-lg font-bold text-white mb-2 transition-colors ${isSoldOut ? 'text-gray-500' : 'group-hover:text-cyan-400'}`}>
                                 {course.title}
                             </h3>
                             <p className="text-gray-400 text-sm mb-4 flex-1 line-clamp-2">{course.description}</p>
                             
                             {/* Hiển thị các gói giá */}
                             <div className="mb-4">
                                 <div className="flex flex-wrap gap-2 text-xs">
                                     <span className="px-2 py-1 rounded-full bg-blue-500/20 text-blue-400 border border-blue-500/30">
                                         PDF: 30k
                                     </span>
                                     <span className="px-2 py-1 rounded-full bg-green-500/20 text-green-400 border border-green-500/30">
                                         Quiz: từ 6k
                                     </span>
                                     <span className="px-2 py-1 rounded-full bg-purple-500/20 text-purple-400 border border-purple-500/30">
                                         Combo: 50k
                                     </span>
                                 </div>
                             </div>
                             
                             <div className="mb-3">
                                 <StockBadge quantity={course.quantity} />
                             </div>
                             
                             {/* Nút chọn gói hoặc hiển thị gói */}
                             {!showPackages ? (
                                 <div className="flex gap-2 pt-3 border-t border-white/10">
                                     {!isSoldOut && !isLoading && course.trialLink && (
                                         <a href={course.trialLink} target="_blank" rel="noopener noreferrer" 
                                            className="flex-1 px-4 py-2.5 rounded-full bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500 text-white font-medium flex items-center justify-center gap-2 transition-all text-sm"
                                            title="Làm thử miễn phí">
                                             <IconFileEdit className="w-4 h-4" />
                                             Làm thử
                                         </a>
                                     )}
                                     <button 
                                         onClick={() => !isSoldOut && !isLoading && setShowPackages(true)} 
                                         disabled={isSoldOut || isLoading}
                                         className={`flex-1 px-4 py-2.5 rounded-full font-medium flex items-center justify-center gap-2 transition-all text-sm ${
                                             isSoldOut 
                                             ? 'bg-gray-800 text-gray-500 cursor-not-allowed border border-gray-700' 
                                             : isLoading
                                             ? 'bg-gray-700 text-gray-400 cursor-wait'
                                             : 'bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white shadow-lg shadow-cyan-500/20'
                                         }`}>
                                         {isSoldOut ? 'Hết hàng' : isLoading ? <IconLoader className="w-4 h-4 animate-spin" /> : (
                                             <>
                                                 <IconShoppingCart className="w-4 h-4" />
                                                 Mua ngay
                                             </>
                                         )}
                                     </button>
                                 </div>
                             ) : (
                                 <div className="pt-3 border-t border-white/10 space-y-3">
                                     <PackageSelector selectedPackage={selectedPackage} onSelect={setSelectedPackage} />
                                     
                                     <div className="flex gap-2">
                                         <button 
                                             onClick={() => { setShowPackages(false); setSelectedPackage(null); }}
                                             className="px-4 py-2 rounded-full bg-gray-700 hover:bg-gray-600 text-white text-sm">
                                             Hủy
                                         </button>
                                         <button 
                                             onClick={handleBuyClick}
                                             disabled={!selectedPackage}
                                             className={`flex-1 px-4 py-2 rounded-full font-medium text-sm transition-all ${
                                                 selectedPackage 
                                                 ? 'bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white' 
                                                 : 'bg-gray-700 text-gray-500 cursor-not-allowed'
                                             }`}>
                                             {selectedPackage ? `Mua ${selectedPackage.priceDisplay}` : 'Chọn gói'}
                                         </button>
                                     </div>
                                 </div>
                             )}
                         </div>
                     </GlassCard>
                 </RevealOnScroll>
             );
         };

         const AccountCard = ({ account, index, onBuy }) => {
             const isSoldOut = account.quantity === 0;
             const isLoading = account.quantity === -1;
             
             return (
                 <RevealOnScroll delay={index * 100}>
                     <GlassCard className={`group h-full flex flex-col p-6 ${isSoldOut ? 'opacity-60' : ''}`}>
                         <div className={`w-16 h-16 rounded-2xl bg-gradient-to-br ${account.color} flex items-center justify-center text-white mb-4 shadow-lg ${isSoldOut ? 'grayscale' : ''}`}>
                             {account.icon}
                         </div>
                         <h3 className={`text-xl font-bold text-white mb-1 ${isSoldOut ? 'text-gray-400' : ''}`}>{account.title}</h3>
                         <p className="text-xs font-medium mb-3 text-gray-400 uppercase">{account.platform}</p>
                         <p className="text-gray-400 text-sm mb-4 flex-1">{account.description}</p>
                         
                         {!account.isContact && (
                             <div className="mb-3"><StockBadge quantity={account.quantity} /></div>
                         )}
                         
                         <div className="flex items-center justify-between pt-4 border-t border-white/10 mt-auto">
                             <span className={`text-xl font-bold ${isSoldOut ? 'text-gray-500' : (account.isContact ? 'text-amber-400' : 'text-white')}`}>{account.price}</span>
                             <button onClick={() => !isSoldOut && !isLoading && onBuy(account, null)}
                                disabled={isSoldOut || isLoading}
                                className={`px-5 py-2.5 rounded-full font-medium flex items-center gap-2 ${
                                    isSoldOut ? 'bg-gray-800 text-gray-500 cursor-not-allowed border border-white/10' 
                                    : isLoading ? 'bg-gray-700 text-gray-400 cursor-wait'
                                    : account.isContact ? 'bg-amber-600 hover:bg-amber-500 shadow-amber-600/20' 
                                    : `bg-gradient-to-r ${account.color} hover:opacity-90 shadow-lg`
                                } text-white shadow-md`}>
                                 {account.isContact ? <IconPhone size={16} /> : isSoldOut ? null : isLoading ? <IconLoader size={16} className="animate-spin" /> : <IconShoppingCart size={16} />}
                                 {isSoldOut ? 'Hết hàng' : isLoading ? '...' : (account.isContact ? 'Liên hệ' : 'Mua')}
                             </button>
                         </div>
                     </GlassCard>
                 </RevealOnScroll>
             );
         };

         // Source Code Card Component
         const SourceCodeCard = ({ item, index, onBuy }) => {
             const isSoldOut = item.quantity === 0;
             const isLoading = item.quantity === -1;
             
             return (
                 <RevealOnScroll delay={index * 100}>
                     <GlassCard className={`group h-full flex flex-col p-6 ${isSoldOut ? 'opacity-60' : ''}`}>
                         <div className={`w-16 h-16 rounded-2xl bg-gradient-to-br ${item.color} flex items-center justify-center text-white mb-4 shadow-lg ${isSoldOut ? 'grayscale' : ''}`}>
                             {item.icon}
                         </div>
                         <h3 className={`text-xl font-bold text-white mb-2 ${isSoldOut ? 'text-gray-400' : ''}`}>{item.title}</h3>
                         <p className="text-gray-400 text-sm mb-4 flex-1">{item.description}</p>
                         
                         <div className="flex flex-wrap gap-2 mb-4">
                             {item.features.map((f, i) => (
                                 <span key={i} className="px-2 py-1 text-xs rounded-full bg-white/5 text-gray-300 border border-white/10">
                                     {f}
                                 </span>
                             ))}
                         </div>
                         
                         {!item.isContact && (
                             <div className="mb-3"><StockBadge quantity={item.quantity} /></div>
                         )}
                         
                         <div className="flex items-center justify-between pt-4 border-t border-white/10 mt-auto">
                             <span className={`text-xl font-bold ${isSoldOut ? 'text-gray-500' : (item.isContact ? 'text-amber-400' : 'text-white')}`}>{item.price}</span>
                             <div className="flex gap-2">
                                 {item.demoLink && !item.isContact && (
                                     <a href={item.demoLink} target="_blank" rel="noopener noreferrer"
                                        className="px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center gap-1 text-sm transition-colors">
                                         <IconExternalLink size={14} />
                                         Demo
                                     </a>
                                 )}
                                 <button onClick={() => !isSoldOut && !isLoading && onBuy(item, null)}
                                    disabled={isSoldOut || isLoading}
                                    className={`px-5 py-2 rounded-full font-medium flex items-center gap-2 text-sm ${
                                        isSoldOut ? 'bg-gray-800 text-gray-500 cursor-not-allowed' 
                                        : isLoading ? 'bg-gray-700 text-gray-400 cursor-wait'
                                        : item.isContact ? 'bg-amber-600 hover:bg-amber-500' 
                                        : `bg-gradient-to-r ${item.color} hover:opacity-90`
                                    } text-white`}>
                                     {item.isContact ? <IconPhone size={14} /> : isSoldOut ? null : isLoading ? <IconLoader size={14} className="animate-spin" /> : <IconShoppingCart size={14} />}
                                     {isSoldOut ? 'Hết' : isLoading ? '...' : (item.isContact ? 'Liên hệ' : 'Mua')}
                                 </button>
                             </div>
                         </div>
                     </GlassCard>
                 </RevealOnScroll>
             );
         };

         const ReviewCard = ({ review }) => (
             <GlassCard className="w-[320px] md:w-[380px] shrink-0 mx-3 p-6" hover={false}>
                 <div className="flex justify-between items-start mb-4">
                     <div className="flex gap-1 text-amber-400">
                         {[...Array(5)].map((_, i) => <IconStar key={i} size={14} className={i < (review.rating || 5) ? "fill-current" : "text-gray-600"} />)}
                     </div>
                     <span className="text-[10px] uppercase font-bold px-3 py-1 rounded-full bg-cyan-900/30 text-cyan-400 border border-cyan-500/30">
                         {review.type || "Thành viên"}
                     </span>
                 </div>
                 <p className="text-gray-300 italic text-sm line-clamp-3 mb-4">"{review.content}"</p>
                 <div className="flex items-center gap-3 pt-4 border-t border-white/10">
                     <div className="w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold">{review.name?.charAt(0)}</div>
                     <div>
                         <h4 className="text-white font-bold text-sm">{review.name}</h4>
                         <p className="text-cyan-500 text-xs flex items-center gap-1"><IconCheckCircle size={12} className="fill-current" /> Đã xác thực</p>
                     </div>
                 </div>
             </GlassCard>
         );

        // --- MAIN APP ---
        function GalaxyShop() {
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [scrolled, setScrolled] = useState(false);
            const [scrollProgress, setScrollProgress] = useState(0);
            
            const [searchGiuaKi, setSearchGiuaKi] = useState('');
            const [searchCuoiKi, setSearchCuoiKi] = useState('');
            
            const [giuaKi, setGiuaKi] = useState(GIUAKI_DATA);
            const [cuoiKi, setCuoiKi] = useState(CUOIKI_DATA);
            const [apps, setApps] = useState(ACCOUNTS_DATA);
            const [sourceCode, setSourceCode] = useState(SOURCE_CODE_DATA);
            const [isLoadingStock, setIsLoadingStock] = useState(true);

            const [selectedProduct, setSelectedProduct] = useState(null);
            const [selectedPackage, setSelectedPackage] = useState(null);
            const [orderForm, setOrderForm] = useState({ name: '', email: '', phone: '', quantity: 1 });
            const [orderStep, setOrderStep] = useState(1);
            const [searchEmail, setSearchEmail] = useState('');
            const [myOrders, setMyOrders] = useState(null);
            const [isSearching, setIsSearching] = useState(false);
            const [generatedOrderId, setGeneratedOrderId] = useState(''); 
            const [orderError, setOrderError] = useState(null);
            
            const [reviews, setReviews] = useState(DEFAULT_REVIEWS);
            const [fbForm, setFbForm] = useState({ name: '', email: '', message: '', rating: 5, type: 'Mua đề thi' });
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [paidKey, setPaidKey] = useState(null);
            
            // Legal modal state
            const [legalModal, setLegalModal] = useState({ isOpen: false, pageKey: null });

            const filteredGiuaKi = useMemo(() => {
                if (!searchGiuaKi.trim()) return giuaKi;
                const term = searchGiuaKi.toLowerCase();
                return giuaKi.filter(item => 
                    item.title.toLowerCase().includes(term) || 
                    item.subject.toLowerCase().includes(term) ||
                    item.tags.some(tag => tag.toLowerCase().includes(term))
                );
            }, [giuaKi, searchGiuaKi]);

            const filteredCuoiKi = useMemo(() => {
                if (!searchCuoiKi.trim()) return cuoiKi;
                const term = searchCuoiKi.toLowerCase();
                return cuoiKi.filter(item => 
                    item.title.toLowerCase().includes(term) || 
                    item.subject.toLowerCase().includes(term) ||
                    item.tags.some(tag => tag.toLowerCase().includes(term))
                );
            }, [cuoiKi, searchCuoiKi]);

            useEffect(() => {
                const handleScroll = () => {
                    setScrolled(window.scrollY > 50);
                    const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
                    const progress = (window.scrollY / scrollHeight) * 100;
                    setScrollProgress(progress);
                };
                window.addEventListener('scroll', handleScroll);
                fetchReviews();
                fetchInventory();
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            useEffect(() => {
                let interval;
                if (orderStep === 2 && generatedOrderId) {
                    interval = setInterval(async () => {
                        try {
                            const res = await fetch(`${SCRIPT_URL}?action=check_status&orderId=${generatedOrderId}`);
                            const data = await res.json();
                            if (data.status === 'paid' && data.key) {
                                setPaidKey(data.key);
                                setOrderStep(3); 
                                clearInterval(interval);
                                fetchInventory();
                            } else if (data.status === 'partial') {
                                // Xử lý trường hợp chuyển thiếu
                                setOrderError(`Số tiền chuyển khoản chưa đủ. Vui lòng chuyển thêm ${data.remaining?.toLocaleString('vi-VN')}đ hoặc liên hệ hỗ trợ.`);
                            }
                        } catch (e) { console.error("Polling error", e); }
                    }, 3000); 
                }
                return () => clearInterval(interval);
            }, [orderStep, generatedOrderId]);

            const fetchReviews = async () => {
                try {
                    const res = await fetch(`${SCRIPT_URL}?action=get_reviews`);
                    const data = await res.json();
                    if (Array.isArray(data)) setReviews(data);
                } catch (e) { console.error(e); }
            };

            const fetchInventory = async () => {
                setIsLoadingStock(true);
                try {
                    const res = await fetch(`${SCRIPT_URL}?action=get_products`);
                    if (!res.ok) throw new Error("Server response not ok");
                    const data = await res.json();
                    
                    if (Array.isArray(data) && data.length > 0) {
                        const updateFromSheet = (localList) => localList.map(localItem => {
                            const sheetItem = data.find(i => String(i.id) === String(localItem.id));
                            return sheetItem ? { ...localItem, quantity: parseInt(sheetItem.quantity) || 0 } : { ...localItem, quantity: localItem.quantity === -1 ? 0 : localItem.quantity };
                        });
                        setGiuaKi(prev => updateFromSheet(prev));
                        setCuoiKi(prev => updateFromSheet(prev));
                        setApps(prev => updateFromSheet(prev));
                        setSourceCode(prev => updateFromSheet(prev));
                    } else {
                        setGiuaKi(prev => prev.map(item => ({ ...item, quantity: item.quantity === -1 ? 999 : item.quantity })));
                        setCuoiKi(prev => prev.map(item => ({ ...item, quantity: item.quantity === -1 ? 999 : item.quantity })));
                        setApps(prev => prev.map(item => ({ ...item, quantity: item.quantity === -1 ? 999 : item.quantity })));
                        setSourceCode(prev => prev.map(item => ({ ...item, quantity: item.quantity === -1 ? 999 : item.quantity })));
                    }
                } catch (e) { 
                    setGiuaKi(prev => prev.map(item => ({ ...item, quantity: item.quantity === -1 ? 999 : item.quantity })));
                    setCuoiKi(prev => prev.map(item => ({ ...item, quantity: item.quantity === -1 ? 999 : item.quantity })));
                    setApps(prev => prev.map(item => ({ ...item, quantity: item.quantity === -1 ? 999 : item.quantity })));
                    setSourceCode(prev => prev.map(item => ({ ...item, quantity: item.quantity === -1 ? 999 : item.quantity })));
                } finally {
                    setIsLoadingStock(false);
                }
            };

            const handleBuyClick = (product, pkg) => {
                if (product.quantity <= 0) { alert("Sản phẩm này đã hết hàng!"); return; }
                if(product.isContact) {
                    document.getElementById('lien-he')?.scrollIntoView({ behavior: 'smooth' });
                } else {
                    setSelectedProduct(product);
                    setSelectedPackage(pkg);
                    setOrderForm(prev => ({ ...prev, quantity: 1 }));
                    setOrderStep(1);
                    setPaidKey(null);
                    setOrderError(null);
                    setTimeout(() => document.getElementById('dat-hang')?.scrollIntoView({ behavior: 'smooth' }), 100);
                }
            };

            const validateOrderForm = () => {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                const phoneRegex = /^(0[3|5|7|8|9])+([0-9]{8})$/;
                if (!orderForm.name.trim()) return "Vui lòng nhập họ tên.";
                if (orderForm.name.trim().length < 2) return "Họ tên phải có ít nhất 2 ký tự.";
                if (!phoneRegex.test(orderForm.phone)) return "Vui lòng nhập số điện thoại hợp lệ (10 số, bắt đầu bằng 03, 05, 07, 08, 09).";
                if (!emailRegex.test(orderForm.email)) return "Vui lòng nhập email hợp lệ.";
                return null;
            };

            const handleOrderSubmit = async (e) => {
                e.preventDefault();
                setOrderError(null);
                const error = validateOrderForm();
                if (error) { setOrderError(error); return; }
                setOrderStep(1.5); 
            };

            const getTotalPrice = () => {
                if (selectedPackage) {
                    return selectedPackage.price * orderForm.quantity;
                }
                if (selectedProduct?.priceVal) {
                    return selectedProduct.priceVal * orderForm.quantity;
                }
                return 0;
            };

            const getProductDisplayName = () => {
                if (selectedPackage) {
                    return `${selectedProduct?.title} - ${selectedPackage.name}`;
                }
                return selectedProduct?.title || '';
            };

            const handleConfirmOrder = async () => {
                setIsSubmitting(true);
                const newOrderId = "DH" + Math.floor(Math.random() * 100000);
                setGeneratedOrderId(newOrderId);

                try {
                    const response = await fetch(SCRIPT_URL, {
                        method: 'POST', 
                        mode: 'no-cors', 
                        headers: { 'Content-Type': 'text/plain' },
                        body: JSON.stringify({ 
                            action: 'create_order', 
                            orderId: newOrderId, 
                            name: orderForm.name, 
                            email: orderForm.email, 
                            phone: orderForm.phone, 
                            product: getProductDisplayName(), 
                            productId: selectedProduct?.id,
                            packageId: selectedPackage?.id || 'app',
                            price: getTotalPrice(), 
                            quantity: orderForm.quantity,
                            expectedAmount: getTotalPrice() // Thêm số tiền kỳ vọng để đối chiếu
                        })
                    });
                    setOrderStep(2); 
                } catch (e) { 
                    setOrderError("Lỗi kết nối! Vui lòng thử lại.");
                }
                setIsSubmitting(false);
            };

            const handleSearchOrder = async (e) => {
                e.preventDefault();
                setIsSearching(true);
                try {
                    const res = await fetch(`${SCRIPT_URL}?action=check_order&email=${searchEmail}`);
                    const data = await res.json();
                    setMyOrders(data);
                } catch (e) { alert("Lỗi khi tra cứu"); }
                setIsSearching(false);
            };

            const handleFbSubmit = async (e) => {
                e.preventDefault();
                if (!fbForm.email || !fbForm.email.includes('@')) { alert("Vui lòng nhập địa chỉ email hợp lệ!"); return; }
                setIsSubmitting(true);
                try {
                    await fetch(SCRIPT_URL, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'text/plain' }, body: JSON.stringify({ action: 'submit_feedback', ...fbForm }) });
                    alert("Cảm ơn đánh giá của bạn!");
                    setFbForm({ name: '', email: '', message: '', rating: 5, type: 'Mua đề thi' });
                    setTimeout(fetchReviews, 2000);
                } catch (e) { alert("Lỗi gửi!"); }
                setIsSubmitting(false);
            };

            const copyToClipboard = (text) => { navigator.clipboard.writeText(text); alert("Đã sao chép: " + text); };

            const renderMarqueeRow = (items, direction = 'left') => {
                if (items.length === 0) return null;
                let displayItems = [...items];
                while (displayItems.length < 6) displayItems = [...displayItems, ...items];
                return (
                    <div className="relative flex overflow-hidden py-4">
                        <div className="flex animate-marquee hover:[animation-play-state:paused]" style={{ animationDirection: direction === 'right' ? 'reverse' : 'normal' }}>
                            {displayItems.map((review, idx) => <ReviewCard key={`${idx}-marquee`} review={review} />)}
                        </div>
                    </div>
                );
            };

            const handleOrderChange = (e) => {
                const { name, value } = e.target;
                if (name === 'phone') { setOrderForm(prev => ({ ...prev, [name]: value.replace(/\D/g, '') })); return; }
                setOrderForm(prev => ({ ...prev, [name]: value }));
            };

            const incrementQuantity = () => setOrderForm(prev => ({ ...prev, quantity: Math.min(10, prev.quantity + 1) }));
            const decrementQuantity = () => setOrderForm(prev => ({ ...prev, quantity: Math.max(1, prev.quantity - 1) }));
            const handleInputChange = (e) => { const { name, value } = e.target; setFbForm(prev => ({ ...prev, [name]: value })); };

            const openLegalModal = (pageKey) => setLegalModal({ isOpen: true, pageKey });
            const closeLegalModal = () => setLegalModal({ isOpen: false, pageKey: null });

            return (
                <div className="min-h-screen bg-[#030712] text-gray-100 font-sans selection:bg-cyan-500 selection:text-white overflow-x-hidden">
                    <ParticleField />
                    <ShootingStars />
                    <div className="fixed inset-0 z-0 pointer-events-none overflow-hidden">
                        <div className="absolute top-0 left-1/4 w-[600px] h-[600px] bg-cyan-500/10 rounded-full blur-[128px] animate-pulse" />
                        <div className="absolute bottom-0 right-1/4 w-[600px] h-[600px] bg-purple-500/10 rounded-full blur-[128px] animate-pulse" style={{ animationDelay: '1s' }} />
                        <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-blue-500/5 rounded-full blur-[128px]" />
                    </div>

                    <div className="fixed top-0 left-0 right-0 h-1 z-[100] bg-gray-900/50">
                        <div className="h-full bg-gradient-to-r from-cyan-500 via-blue-500 to-purple-500 transition-all duration-150" style={{ width: `${scrollProgress}%` }} />
                    </div>

                    {/* Legal Modal */}
                    <LegalModal isOpen={legalModal.isOpen} onClose={closeLegalModal} pageKey={legalModal.pageKey} />

                    {/* Navbar */}
                    <nav className={`fixed top-0 w-full z-50 transition-all duration-300 ${scrolled ? 'bg-[#030712]/90 backdrop-blur-md border-b border-white/10' : 'bg-transparent'}`}>
                        <div className="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
                            <div className="flex items-center gap-2 cursor-pointer" onClick={() => window.scrollTo(0,0)}>
                                <div className="w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center">
                                    <IconSparkles size={16} className="text-white" />
                                </div>
                                <span className="font-bold text-xl tracking-tight">AstroMind</span>
                            </div>

                            <div className="hidden md:flex gap-6 items-center">
                                {['Giữa kì', 'Cuối kì', 'Ứng dụng', 'Source Code', 'Tra cứu', 'Liên hệ'].map(item => (
                                    <button key={item} 
                                        onClick={() => document.getElementById(item.toLowerCase().replace(/ /g,'-').replace(/ứ/g,'u').replace(/á/g,'a'))?.scrollIntoView({behavior:'smooth'})}
                                        className="text-gray-300 hover:text-white text-sm font-medium transition-colors relative group">
                                        {item}
                                        <span className="absolute bottom-0 left-0 w-0 h-0.5 bg-cyan-400 transition-all duration-300 group-hover:w-full"></span>
                                    </button>
                                ))}
                                <button onClick={fetchInventory} disabled={isLoadingStock}
                                    className="p-2 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 text-gray-400 hover:text-white transition-all" title="Cập nhật">
                                    <IconRefresh className={`w-4 h-4 ${isLoadingStock ? 'animate-spin' : ''}`} />
                                </button>
                            </div>

                            <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="md:hidden text-white">
                                {isMenuOpen ? <IconX /> : <IconMenu />}
                            </button>
                        </div>
                        
                        {isMenuOpen && (
                            <div className="md:hidden bg-[#0A1220] border-t border-white/10 p-4 space-y-3">
                                {['Giữa kì', 'Cuối kì', 'Ứng dụng', 'Source Code', 'Tra cứu', 'Liên hệ'].map(item => (
                                    <button key={item} onClick={() => { document.getElementById(item.toLowerCase().replace(/ /g,'-').replace(/ứ/g,'u').replace(/á/g,'a'))?.scrollIntoView({behavior:'smooth'}); setIsMenuOpen(false); }}
                                        className="block w-full text-left text-gray-300 py-2">{item}</button>
                                ))}
                            </div>
                        )}
                    </nav>

                    {/* Hero */}
                    <section id="home" className="relative pt-32 pb-20 px-4 text-center z-10 min-h-screen flex items-center justify-center">
                        <RevealOnScroll>
                            <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-cyan-500/10 to-purple-500/10 border border-cyan-500/20 mb-8">
                                <IconSparkles className="w-4 h-4 text-cyan-400" />
                                <span className="text-sm text-cyan-400 font-medium">Nền tảng tài liệu học tập #1 Việt Nam</span>
                            </div>
                            <h1 className="text-5xl md:text-7xl lg:text-8xl font-extrabold mb-6 tracking-tight">
                                <span className="block text-white mb-2">Khai Phá</span>
                                <span className="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600">Tri Thức Vũ Trụ</span>
                            </h1>
                            <p className="text-xl text-gray-400 max-w-2xl mx-auto mb-8">
                                Đề thi Giữa kì, Cuối kì và tài khoản Premium chất lượng cao.
                            </p>
                            
                            {/* Hiển thị bảng giá tổng quan */}
                            <div className="flex flex-wrap justify-center gap-4 mb-12">
                                <div className="px-4 py-2 rounded-full bg-blue-500/10 border border-blue-500/30 text-blue-400 text-sm">
                                    <IconFileText className="w-4 h-4 inline mr-2" />
                                    File PDF: <span className="font-bold">30.000đ</span>
                                </div>
                                <div className="px-4 py-2 rounded-full bg-green-500/10 border border-green-500/30 text-green-400 text-sm">
                                    <IconPlayCircle className="w-4 h-4 inline mr-2" />
                                    Quiz: <span className="font-bold">từ 6.000đ</span>
                                </div>
                                <div className="px-4 py-2 rounded-full bg-purple-500/10 border border-purple-500/30 text-purple-400 text-sm">
                                    <IconPackage className="w-4 h-4 inline mr-2" />
                                    Combo: <span className="font-bold">50.000đ</span>
                                </div>
                            </div>
                            
                            <div className="flex flex-col sm:flex-row justify-center gap-4">
                                <MagneticButton onClick={() => document.getElementById('giua-ki').scrollIntoView({ behavior: 'smooth' })} 
                                    className="px-8 py-3 rounded-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-semibold text-base shadow-[0_0_20px_rgba(6,182,212,0.3)] hover:shadow-[0_0_30px_rgba(6,182,212,0.5)] flex items-center justify-center gap-2 transition-all duration-300 min-w-[240px]">
                                    <IconClipboardList size={18} /> ĐỀ GIỮA KÌ <IconChevronRight size={16} />
                                </MagneticButton>
                                <MagneticButton onClick={() => document.getElementById('cuoi-ki').scrollIntoView({ behavior: 'smooth' })} 
                                    className="px-8 py-3 rounded-full bg-white/5 hover:bg-white/10 border border-white/20 text-white font-semibold text-base backdrop-blur-md flex items-center justify-center gap-2 transition-all duration-300 hover:border-white/40 min-w-[240px]">
                                    <IconGraduationCap size={18} /> ĐỀ CUỐI KÌ
                                </MagneticButton>
                            </div>
                        </RevealOnScroll>
                    </section>

                    {/* Pricing Overview */}
                    <section className="relative z-10 py-16 px-4">
                        <div className="max-w-5xl mx-auto">
                            <RevealOnScroll>
                                <div className="text-center mb-12">
                                    <h2 className="text-3xl md:text-4xl font-bold text-white mb-4">Bảng Giá Chi Tiết</h2>
                                    <p className="text-gray-400">Chọn gói phù hợp với nhu cầu học tập của bạn</p>
                                </div>
                            </RevealOnScroll>
                            
                            <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4">
                                {Object.values(PACKAGE_CONFIG).map((pkg, idx) => (
                                    <RevealOnScroll key={pkg.id} delay={idx * 100}>
                                        <GlassCard className={`p-5 text-center h-full relative ${pkg.bestValue ? 'border-amber-500/50' : pkg.popular ? 'border-purple-500/50' : ''}`}>
                                            {pkg.bestValue && (
                                                <div className="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-gradient-to-r from-amber-500 to-orange-500 text-white text-xs font-bold rounded-full whitespace-nowrap">
                                                    TIẾT KIỆM NHẤT
                                                </div>
                                            )}
                                            {pkg.popular && !pkg.bestValue && (
                                                <div className="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-purple-500 text-white text-xs font-bold rounded-full">
                                                    PHỔ BIẾN
                                                </div>
                                            )}
                                            
                                            <div className={`w-12 h-12 mx-auto rounded-xl bg-gradient-to-br ${pkg.color} flex items-center justify-center text-white mb-4`}>
                                                {pkg.icon}
                                            </div>
                                            
                                            <h3 className="font-bold text-white mb-2">{pkg.name}</h3>
                                            
                                            <div className="mb-3">
                                                <span className="text-2xl font-bold text-cyan-400">{pkg.priceDisplay}</span>
                                                {pkg.originalPrice && (
                                                    <span className="text-sm text-gray-500 line-through ml-2">{pkg.originalPrice}</span>
                                                )}
                                            </div>
                                            
                                            <ul className="text-xs text-gray-400 space-y-1">
                                                {pkg.features.map((f, i) => (
                                                    <li key={i} className="flex items-center gap-1 justify-center">
                                                        <IconCheck className="w-3 h-3 text-green-400" />
                                                        {f}
                                                    </li>
                                                ))}
                                            </ul>
                                        </GlassCard>
                                    </RevealOnScroll>
                                ))}
                            </div>
                        </div>
                    </section>

                    {/* Stats Section */}
                    <section className="relative z-10 py-10 px-4">
                        <RevealOnScroll delay={400}>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8 max-w-5xl mx-auto">
                            {STATS.map((stat, idx) => (
                            <GlassCard key={idx} className="p-4 md:p-6 text-center">
                                <div className={`w-12 h-12 rounded-xl bg-gradient-to-br ${stat.color} flex items-center justify-center mx-auto mb-3 shadow-lg`}>
                                {React.cloneElement(stat.icon, { className: "w-6 h-6 text-white" })}
                                </div>
                                <div className="text-2xl md:text-3xl font-bold text-white mb-1">
                                {stat.value.includes('+') ? <><AnimatedCounter end={parseInt(stat.value)} />+</> : stat.value.includes('%') ? <><AnimatedCounter end={parseInt(stat.value)} />%</> : stat.value}
                                </div>
                                <div className="text-sm text-gray-500">{stat.label}</div>
                            </GlassCard>
                            ))}
                        </div>
                        </RevealOnScroll>
                    </section>

                    {/* Features */}
                    <section className="relative z-10 py-16">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                {FEATURES.map((feature, idx) => (
                                    <RevealOnScroll key={idx} delay={idx * 100}>
                                        <GlassCard className="p-6 text-center h-full flex flex-col items-center">
                                            <div className="w-14 h-14 rounded-2xl bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center mx-auto mb-4 border border-cyan-500/20">
                                                {React.cloneElement(feature.icon, { className: "w-7 h-7 text-cyan-400" })}
                                            </div>
                                            <h3 className="text-lg font-bold text-white mb-2">{feature.title}</h3>
                                            <p className="text-sm text-gray-500 flex-1">{feature.description}</p>
                                        </GlassCard>
                                    </RevealOnScroll>
                                ))}
                            </div>
                        </div>
                    </section>

                    {/* GIỮA KÌ Section */}
                    <section id="giua-ki" className="py-20 px-4 max-w-7xl mx-auto">
                        <RevealOnScroll>
                            <div className="flex flex-col md:flex-row md:items-end md:justify-between gap-6 mb-12">
                                <div className="text-center md:text-left">
                                    <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border border-cyan-500/20 mb-4">
                                        <IconClipboardList className="w-5 h-5 text-cyan-400" />
                                        <span className="text-sm text-cyan-400 font-medium">Tài liệu ôn tập</span>
                                    </div>
                                    <h2 className="text-3xl md:text-5xl font-bold text-white mb-4">Đề Thi Giữa Kì</h2>
                                    <p className="text-gray-400 max-w-xl">Bộ sưu tập đề thi giữa kì từ các trường đại học hàng đầu</p>
                                </div>
                                
                                <SearchBar 
                                    searchTerm={searchGiuaKi} 
                                    setSearchTerm={setSearchGiuaKi} 
                                    placeholder="Tìm môn học..."
                                    accentColor="cyan"
                                />
                            </div>
                        </RevealOnScroll>
                        
                        {filteredGiuaKi.length > 0 ? (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                {filteredGiuaKi.map((course, idx) => (
                                    <CourseCard key={course.id} course={course} index={idx} onBuy={handleBuyClick} />
                                ))}
                            </div>
                        ) : (
                            <div className="text-center py-16">
                                <IconSearch className="w-16 h-16 text-gray-600 mx-auto mb-4" />
                                <p className="text-gray-400 text-lg">Không tìm thấy môn học "{searchGiuaKi}"</p>
                                <button onClick={() => setSearchGiuaKi('')} className="mt-4 text-cyan-400 hover:text-cyan-300 underline">
                                    Xóa bộ lọc
                                </button>
                            </div>
                        )}
                    </section>

                    {/* CUỐI KÌ Section */}
                    <section id="cuoi-ki" className="py-20 px-4 max-w-7xl mx-auto">
                        <RevealOnScroll>
                            <div className="flex flex-col md:flex-row md:items-end md:justify-between gap-6 mb-12">
                                <div className="text-center md:text-left">
                                    <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/20 mb-4">
                                        <IconGraduationCap className="w-5 h-5 text-purple-400" />
                                        <span className="text-sm text-purple-400 font-medium">Tài liệu ôn tập</span>
                                    </div>
                                    <h2 className="text-3xl md:text-5xl font-bold text-white mb-4">Đề Thi Cuối Kì</h2>
                                    <p className="text-gray-400 max-w-xl">Trọn bộ đề thi cuối kì đầy đủ nhất, cập nhật liên tục</p>
                                </div>
                                
                                <SearchBar 
                                    searchTerm={searchCuoiKi} 
                                    setSearchTerm={setSearchCuoiKi} 
                                    placeholder="Tìm môn học..."
                                    accentColor="purple"
                                />
                            </div>
                        </RevealOnScroll>
                        
                        {filteredCuoiKi.length > 0 ? (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                {filteredCuoiKi.map((course, idx) => (
                                    <CourseCard key={course.id} course={course} index={idx} onBuy={handleBuyClick} />
                                ))}
                            </div>
                        ) : (
                            <div className="text-center py-16">
                                <IconSearch className="w-16 h-16 text-gray-600 mx-auto mb-4" />
                                <p className="text-gray-400 text-lg">Không tìm thấy môn học "{searchCuoiKi}"</p>
                                <button onClick={() => setSearchCuoiKi('')} className="mt-4 text-purple-400 hover:text-purple-300 underline">
                                    Xóa bộ lọc
                                </button>
                            </div>
                        )}
                    </section>

                    {/* Apps */}
                    <section id="ung-dung" className="py-20 px-4 max-w-7xl mx-auto">
                        <RevealOnScroll>
                            <div className="text-center mb-16">
                                <h2 className="text-3xl md:text-5xl font-bold text-white mb-6">Tài Khoản & Ứng Dụng</h2>
                                <div className="h-1 w-24 bg-gradient-to-r from-emerald-500 to-teal-500 mx-auto rounded-full" />
                            </div>
                        </RevealOnScroll>
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                            {apps.map((acc, idx) => (
                                <AccountCard key={acc.id} account={acc} index={idx} onBuy={handleBuyClick} />
                            ))}
                        </div>
                    </section>

                    {/* Source Code & Projects Section */}
                    <section id="source-code" className="py-20 px-4 max-w-7xl mx-auto">
                        <RevealOnScroll>
                            <div className="text-center mb-16">
                                <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-cyan-500/10 to-purple-500/10 border border-cyan-500/20 mb-4">
                                    <IconCode className="w-5 h-5 text-cyan-400" />
                                    <span className="text-sm text-cyan-400 font-medium">Dành cho Developer</span>
                                </div>
                                <h2 className="text-3xl md:text-5xl font-bold text-white mb-6">Source Code & Project</h2>
                                <p className="text-gray-400 max-w-2xl mx-auto">Mua source code chất lượng hoặc đặt làm dự án theo yêu cầu</p>
                                <div className="h-1 w-24 bg-gradient-to-r from-cyan-500 to-purple-500 mx-auto rounded-full mt-6" />
                            </div>
                        </RevealOnScroll>
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                            {sourceCode.map((item, idx) => (
                                <SourceCodeCard key={item.id} item={item} index={idx} onBuy={handleBuyClick} />
                            ))}
                        </div>
                    </section>

                    {/* ORDER FORM SECTION */}
                    <section id="dat-hang" className={`py-20 px-4 transition-all duration-500 ${selectedProduct ? 'block' : 'hidden'}`}>
                        <div className="max-w-3xl mx-auto">
                            <GlassCard className="p-8 border-cyan-500/30">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold text-cyan-400">
                                        {orderStep === 1 ? 'Thông Tin Đặt Hàng' : orderStep === 1.5 ? 'Xác Nhận Thông Tin' : orderStep === 2 ? 'Thanh Toán' : 'Thành Công'}
                                    </h2>
                                    <button onClick={() => { setSelectedProduct(null); setSelectedPackage(null); }} className="text-gray-400 hover:text-white"><IconX /></button>
                                </div>
                                
                                {orderError && (
                                    <div className="mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg flex items-center gap-2 text-red-300 text-sm animate-fade-in-down">
                                        <IconAlertCircle size={16} />{orderError}
                                    </div>
                                )}

                                {orderStep === 1 ? (
                                    <form onSubmit={handleOrderSubmit} className="space-y-4">
                                        {/* Chi tiết sản phẩm đã chọn */}
                                        <div className="bg-white/5 p-4 rounded-xl mb-4 border border-white/10">
                                            <div className="flex items-start gap-4 mb-4">
                                                {selectedProduct?.image && (
                                                    <img src={selectedProduct.image} alt="" className="w-16 h-16 rounded-xl object-cover" />
                                                )}
                                                <div className="flex-1">
                                                    <h3 className="font-bold text-white">{selectedProduct?.title}</h3>
                                                    {selectedPackage && (
                                                        <div className="flex items-center gap-2 mt-1">
                                                            <span className={`px-2 py-0.5 rounded-full text-xs font-medium bg-gradient-to-r ${selectedPackage.color} text-white`}>
                                                                {selectedPackage.name}
                                                            </span>
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            
                                            {/* Nếu là App thì không có gói */}
                                            {selectedPackage && (
                                                <div className="bg-black/30 p-3 rounded-lg mb-3">
                                                    <p className="text-sm text-gray-400 mb-2">{selectedPackage.description}</p>
                                                    <ul className="text-xs text-gray-500 space-y-1">
                                                        {selectedPackage.features.map((f, i) => (
                                                            <li key={i} className="flex items-center gap-1">
                                                                <IconCheck className="w-3 h-3 text-green-400" />
                                                                {f}
                                                            </li>
                                                        ))}
                                                    </ul>
                                                </div>
                                            )}
                                            
                                            <div className="flex items-center justify-between border-t border-white/10 pt-3">
                                                <span className="text-gray-400 text-sm">Số lượng:</span>
                                                <div className="flex items-center gap-3">
                                                    <button type="button" onClick={decrementQuantity} className="p-1 rounded-full bg-white/10 hover:bg-white/20 text-white"><IconMinus size={16} /></button>
                                                    <span className="text-white font-bold w-6 text-center">{orderForm.quantity}</span>
                                                    <button type="button" onClick={incrementQuantity} className="p-1 rounded-full bg-white/10 hover:bg-white/20 text-white"><IconPlus size={16} /></button>
                                                </div>
                                            </div>
                                            <div className="flex justify-between items-center border-t border-white/10 pt-3 mt-3">
                                                <span className="text-white font-bold">Tổng tiền:</span>
                                                <span className="text-xl font-bold text-green-400">{getTotalPrice().toLocaleString('vi-VN')}đ</span>
                                            </div>
                                        </div>
                                        
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <input required placeholder="Họ và Tên" className="bg-black/30 border border-gray-700 rounded-2xl p-3 outline-none focus:border-cyan-500 text-white" value={orderForm.name} onChange={handleOrderChange} name="name" />
                                            <input required placeholder="Số điện thoại (10 số)" className="bg-black/30 border border-gray-700 rounded-2xl p-3 outline-none focus:border-cyan-500 text-white" value={orderForm.phone} onChange={handleOrderChange} name="phone" maxLength={10} />
                                        </div>
                                        <input required type="email" placeholder="Email (Để nhận tài liệu)" className="w-full bg-black/30 border border-gray-700 rounded-2xl p-3 outline-none focus:border-cyan-500 text-white" value={orderForm.email} onChange={handleOrderChange} name="email" />
                                        
                                        {/* Thông báo về email */}
                                        <div className="flex items-start gap-2 p-3 bg-blue-500/10 border border-blue-500/30 rounded-xl text-sm">
                                            <IconMail className="w-5 h-5 text-blue-400 shrink-0 mt-0.5" />
                                            <p className="text-blue-300">Tài liệu/tài khoản sẽ được gửi tự động qua email sau khi thanh toán thành công.</p>
                                        </div>
                                        
                                        <button disabled={isSubmitting} className="w-full py-3 bg-gradient-to-r from-cyan-600 to-blue-600 rounded-full font-bold hover:opacity-90 transition-opacity">Tiếp tục</button>
                                    </form>
                                ) : orderStep === 1.5 ? (
                                    <div className="space-y-6">
                                        <div className="bg-white/5 p-6 rounded-2xl border border-white/10 space-y-3">
                                            <h3 className="text-lg font-bold text-white border-b border-white/10 pb-2 mb-2">Vui lòng kiểm tra lại</h3>
                                            <p className="flex justify-between"><span className="text-gray-400">Sản phẩm:</span> <span className="font-medium text-white">{selectedProduct?.title}</span></p>
                                            {selectedPackage && (
                                                <p className="flex justify-between"><span className="text-gray-400">Gói:</span> <span className="text-cyan-400 font-medium">{selectedPackage.name}</span></p>
                                            )}
                                            <p className="flex justify-between"><span className="text-gray-400">Đơn giá:</span> <span className="text-white">{selectedPackage ? selectedPackage.priceDisplay : selectedProduct?.price}</span></p>
                                            <p className="flex justify-between"><span className="text-gray-400">Số lượng:</span> <span className="font-bold text-white">{orderForm.quantity}</span></p>
                                            <p className="flex justify-between border-t border-white/10 pt-2"><span className="text-gray-400">Tổng tiền:</span> <span className="font-bold text-green-400 text-lg">{getTotalPrice().toLocaleString('vi-VN')}đ</span></p>
                                            <div className="border-t border-white/10 pt-2 mt-2">
                                                <p className="flex justify-between"><span className="text-gray-400">Họ tên:</span> <span className="text-white">{orderForm.name}</span></p>
                                                <p className="flex justify-between"><span className="text-gray-400">SĐT:</span> <span className="text-white">{orderForm.phone}</span></p>
                                                <p className="flex justify-between"><span className="text-gray-400">Email:</span> <span className="text-white">{orderForm.email}</span></p>
                                            </div>
                                        </div>
                                        
                                        {/* Lưu ý quan trọng */}
                                        <div className="bg-amber-500/10 border border-amber-500/30 rounded-xl p-4">
                                            <div className="flex items-start gap-2">
                                                <IconAlertTriangle className="w-5 h-5 text-amber-400 shrink-0 mt-0.5" />
                                                <div className="text-sm text-amber-200">
                                                    <p className="font-bold mb-1">Lưu ý quan trọng:</p>
                                                    <ul className="list-disc ml-4 space-y-1 text-amber-300/80">
                                                        <li>Vui lòng chuyển <strong>ĐÚNG SỐ TIỀN</strong> và <strong>ĐÚNG NỘI DUNG</strong> chuyển khoản</li>
                                                        <li>Nếu chuyển thiếu/nhầm, đơn hàng sẽ không được xử lý tự động</li>
                                                        <li>Liên hệ hỗ trợ trong vòng 24h nếu có vấn đề</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="flex gap-4">
                                            <button onClick={() => setOrderStep(1)} className="flex-1 py-3 bg-gray-700 rounded-full font-bold hover:bg-gray-600 text-white">Quay lại</button>
                                            <button onClick={handleConfirmOrder} disabled={isSubmitting} className="flex-1 py-3 bg-gradient-to-r from-cyan-600 to-blue-600 rounded-full font-bold hover:opacity-90 text-white">
                                                {isSubmitting ? 'Đang xử lý...' : 'Xác nhận & Thanh toán'}
                                            </button>
                                        </div>
                                    </div>
                                ) : orderStep === 2 ? (
                                    <div className="text-center space-y-6">
                                        <div className="bg-white p-4 rounded-3xl w-48 h-48 mx-auto shadow-lg shadow-white/10">
                                            <img src={`${BANK_INFO.qrLink}?amount=${getTotalPrice()}&addInfo=${generatedOrderId}&accountName=${encodeURIComponent(BANK_INFO.accountName)}`} alt="QR Thanh Toan" className="w-full h-full object-contain" />
                                        </div>
                                        <div className="bg-white/5 p-4 rounded-2xl text-left space-y-2 text-sm border border-white/10">
                                            <p className="flex justify-between"><span>Ngân hàng:</span> <span className="font-bold text-white">{BANK_INFO.bankId}</span></p>
                                            <p className="flex justify-between items-center"><span>Số tài khoản:</span> <span className="font-bold text-white flex items-center gap-2">{BANK_INFO.accountNum} <IconCopy size={14} className="cursor-pointer text-cyan-400" onClick={() => copyToClipboard(BANK_INFO.accountNum)}/></span></p>
                                            <p className="flex justify-between"><span>Chủ tài khoản:</span> <span className="font-bold text-white">{BANK_INFO.accountName}</span></p>
                                            <p className="flex justify-between items-center text-yellow-400 border-t border-white/10 pt-2 mt-2"><span>Nội dung CK:</span> <span className="font-bold flex items-center gap-2">{generatedOrderId} <IconCopy size={14} className="cursor-pointer" onClick={() => copyToClipboard(generatedOrderId)}/></span></p>
                                            <p className="flex justify-between pt-2"><span>Số tiền:</span> <span className="font-bold text-green-400">{getTotalPrice().toLocaleString('vi-VN')}đ</span></p>
                                        </div>
                                        
                                        {/* Cảnh báo */}
                                        <div className="bg-red-500/10 border border-red-500/30 rounded-xl p-3 text-left">
                                            <p className="text-red-300 text-xs flex items-start gap-2">
                                                <IconAlertCircle className="w-4 h-4 shrink-0 mt-0.5" />
                                                <span>Chuyển khoản ĐÚNG số tiền <strong>{getTotalPrice().toLocaleString('vi-VN')}đ</strong> và nội dung <strong>{generatedOrderId}</strong>. Nếu sai, hệ thống sẽ không xử lý tự động.</span>
                                            </p>
                                        </div>
                                        
                                        <div className="flex items-center justify-center gap-2 text-sm text-cyan-400 animate-pulse"><IconLoader className="animate-spin" size={16}/> Đang chờ thanh toán...</div>
                                        <button onClick={() => setOrderStep(1)} className="text-gray-400 underline hover:text-white text-xs">Quay lại</button>
                                    </div>
                                ) : (
                                    <div className="text-center py-10 animate-fade-in">
                                        <div className="w-20 h-20 bg-green-500/20 text-green-400 rounded-full flex items-center justify-center mx-auto mb-6"><IconCheckCircle size={40} /></div>
                                        <h3 className="text-2xl font-bold text-white mb-4">Thanh Toán Thành Công!</h3>
                                        <div className="bg-green-900/30 border border-green-500/30 p-4 rounded-2xl mb-6">
                                            <p className="text-sm text-gray-300 mb-2">Link tài liệu / Tài khoản của bạn:</p>
                                            <div className="text-xl font-mono font-bold text-green-400 break-all select-all whitespace-pre-line">{paidKey}</div>
                                        </div>
                                        
                                        {/* Thông báo gửi email */}
                                        <div className="bg-blue-500/10 border border-blue-500/30 p-3 rounded-xl mb-6 text-left">
                                            <div className="flex items-start gap-2">
                                                <IconMail className="w-5 h-5 text-blue-400 shrink-0 mt-0.5" />
                                                <p className="text-sm text-blue-300">Thông tin này cũng đã được gửi đến email <strong>{orderForm.email}</strong>. Vui lòng kiểm tra hộp thư (kể cả Spam).</p>
                                            </div>
                                        </div>
                                        
                                        <p className="text-gray-400 text-sm mb-6">Vui lòng lưu lại thông tin này.</p>
                                        <button onClick={() => { setSelectedProduct(null); setSelectedPackage(null); }} className="px-6 py-2 bg-gray-700 hover:bg-gray-600 rounded-full text-white">Đóng</button>
                                    </div>
                                )}
                            </GlassCard>
                        </div>
                    </section>

                    {/* CHECK ORDER */}
                    <section id="tra-cuu" className="py-20 px-4 max-w-2xl mx-auto text-center">
                        <h2 className="text-3xl font-bold mb-8 text-white">Tra Cứu Đơn Hàng</h2>
                        <GlassCard className="p-6">
                            <form onSubmit={handleSearchOrder} className="flex gap-2 mb-6">
                                <input required type="email" placeholder="Nhập Email mua hàng..." 
                                    className="flex-1 bg-black/40 border border-gray-700 rounded-2xl px-4 py-2 outline-none focus:border-cyan-500 text-white"
                                    value={searchEmail} onChange={e => setSearchEmail(e.target.value)} />
                                <button disabled={isSearching} className="bg-cyan-600 hover:bg-cyan-500 px-4 rounded-full flex items-center justify-center">
                                    {isSearching ? <IconLoader className="animate-spin" /> : <IconSearch />}
                                </button>
                            </form>

                            {myOrders && (
                                <div className="text-left space-y-3">
                                    {Array.isArray(myOrders) && myOrders.length > 0 ? myOrders.map((order, i) => (
                                        <div key={i} className="bg-black/30 p-4 rounded-2xl border border-gray-700">
                                            <div className="flex justify-between mb-1">
                                                <span className="font-bold text-white">{order.product}</span>
                                                <span className={`text-xs px-2 py-0.5 rounded-full ${
                                                    order.status === 'Đã thanh toán' || order.status === 'Paid' ? 'bg-green-500/20 text-green-400' 
                                                    : order.status === 'Partial' ? 'bg-orange-500/20 text-orange-400'
                                                    : 'bg-yellow-500/20 text-yellow-400'
                                                }`}>
                                                    {order.status === 'Paid' ? 'Đã thanh toán' : order.status === 'Partial' ? 'Chuyển thiếu' : order.status}
                                                </span>
                                            </div>
                                            <div className="text-sm text-gray-400 mt-2 p-2 bg-black/40 rounded-xl border border-white/5 break-all font-mono whitespace-pre-line">
                                                {order.delivery || "Đang chờ cập nhật..."}
                                            </div>
                                        </div>
                                    )) : (<div className="text-gray-400">Không tìm thấy đơn hàng nào.</div>)}
                                </div>
                            )}
                        </GlassCard>
                    </section>

                    {/* Feedback Section */}
                    <section id="feedback" className="relative z-10 py-20 overflow-hidden">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-16 text-center">
                            <RevealOnScroll>
                                <h2 className="text-3xl md:text-5xl font-bold text-white mb-6">Học Viên Nói Gì?</h2>
                                <div className="h-1 w-24 bg-gradient-to-r from-cyan-500 to-blue-500 mx-auto rounded-full" />
                            </RevealOnScroll>
                        </div>

                        {reviews.length > 0 && (
                            <div className="mb-20 space-y-8">
                                {renderMarqueeRow(reviews.slice(0, Math.ceil(reviews.length / 2)), 'left')}
                                {renderMarqueeRow(reviews.slice(Math.ceil(reviews.length / 2)), 'right')}
                            </div>
                        )}

                        <div className="max-w-2xl mx-auto px-4">
                            <GlassCard className="p-8">
                                <h3 className="text-2xl font-bold text-white mb-6 text-center">Gửi Đánh Giá</h3>
                                <form onSubmit={handleFbSubmit} className="space-y-6">
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <input required placeholder="Tên của bạn" className="bg-black/30 border border-gray-700 rounded-2xl p-3 outline-none focus:border-cyan-500 text-white" value={fbForm.name} onChange={handleInputChange} name="name" />
                                        <input required type="email" placeholder="Email (Bắt buộc)" className="bg-black/30 border border-gray-700 rounded-2xl p-3 outline-none focus:border-cyan-500 text-white" value={fbForm.email} onChange={handleInputChange} name="email" />
                                    </div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-300 mb-2">Đánh giá</label>
                                            <div className="flex gap-2">
                                                {[1,2,3,4,5].map(s => (
                                                    <IconStar key={s} onClick={() => setFbForm({...fbForm, rating: s})} className={`cursor-pointer ${s <= fbForm.rating ? 'fill-amber-400 text-amber-400' : 'text-gray-600'}`} />
                                                ))}
                                            </div>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-300 mb-2">Loại đánh giá</label>
                                            <div className="flex gap-2 bg-white/5 p-1 rounded-lg border border-white/10">
                                                {['Mua đề thi', 'Mua App'].map((type) => (
                                                    <button key={type} type="button" onClick={() => setFbForm({...fbForm, type })}
                                                        className={`flex-1 py-1.5 px-3 rounded-md text-xs font-medium transition-all ${fbForm.type === type ? 'bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-sm' : 'text-gray-400 hover:text-white hover:bg-white/5'}`}>
                                                        {type}
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                    <textarea required placeholder="Chia sẻ cảm nhận..." rows={4} className="w-full bg-black/30 border border-gray-700 rounded-2xl p-3 outline-none focus:border-cyan-500 text-white" value={fbForm.message} onChange={handleInputChange} name="message" />
                                    <button disabled={isSubmitting} className="w-full py-3 bg-gradient-to-r from-cyan-600 to-blue-600 rounded-full font-bold hover:opacity-90">
                                        {isSubmitting ? 'Đang gửi...' : 'Gửi Đánh Giá'}
                                    </button>
                                </form>
                            </GlassCard>
                        </div>
                    </section>

                    {/* Footer */}
                    <section id="lien-he" className="py-12 border-t border-white/10 bg-[#020612]">
                        <div className="max-w-7xl mx-auto px-4">
                            <div className="text-center mb-8">
                                <h2 className="text-2xl font-bold mb-8 text-white">Kết Nối</h2>
                                <div className="flex justify-center gap-6 mb-8">
                                    {SOCIAL_LINKS.map((s, i) => (
                                        <a key={i} href={s.url} className={`p-3 rounded-full bg-gradient-to-r ${s.color} hover:scale-110 transition-transform`}>
                                            <span className="text-white">{s.icon}</span>
                                        </a>
                                    ))}
                                </div>
                            </div>
                            
                            {/* Legal Links */}
                            <div className="flex flex-wrap justify-center gap-6 mb-8 text-sm">
                                <button onClick={() => openLegalModal('terms')} className="text-gray-400 hover:text-cyan-400 flex items-center gap-2 transition-colors">
                                    <IconScale className="w-4 h-4" />
                                    Điều khoản sử dụng
                                </button>
                                <button onClick={() => openLegalModal('privacy')} className="text-gray-400 hover:text-cyan-400 flex items-center gap-2 transition-colors">
                                    <IconLock className="w-4 h-4" />
                                    Chính sách bảo mật
                                </button>
                                <button onClick={() => openLegalModal('refund')} className="text-gray-400 hover:text-cyan-400 flex items-center gap-2 transition-colors">
                                    <IconRotateCcw className="w-4 h-4" />
                                    Chính sách hoàn tiền
                                </button>
                            </div>
                            
                            <p className="text-gray-500 text-sm text-center">© 2024 AstroMind. All rights reserved.</p>
                        </div>
                    </section>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<GalaxyShop />);
    </script>
</body>
</html>
